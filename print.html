<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Personal notebook</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="note.html"><strong aria-hidden="true">1.</strong> Note</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="note/1.html"><strong aria-hidden="true">1.1.</strong> Note 1</a></li><li class="chapter-item expanded "><a href="note/todo.html"><strong aria-hidden="true">1.2.</strong> ToDo</a></li></ol></li><li class="chapter-item expanded "><a href="algorithms/algorithms.html"><strong aria-hidden="true">2.</strong> Algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="algorithms/1.html"><strong aria-hidden="true">2.1.</strong> Big O notations</a></li><li class="chapter-item expanded "><a href="algorithms/stack_queue.html"><strong aria-hidden="true">2.2.</strong> Stack and Queue</a></li><li class="chapter-item expanded "><a href="algorithms/devide_conquer.html"><strong aria-hidden="true">2.3.</strong> Divide and Conquer</a></li><li class="chapter-item expanded "><a href="algorithms/sort.html"><strong aria-hidden="true">2.4.</strong> Sort</a></li><li class="chapter-item expanded "><a href="algorithms/dynamic_programming.html"><strong aria-hidden="true">2.5.</strong> Dynamic programming</a></li><li class="chapter-item expanded "><a href="algorithms/a_star_search.html"><strong aria-hidden="true">2.6.</strong> A * Search homework</a></li><li class="chapter-item expanded "><a href="algorithms/binary_search_tree.html"><strong aria-hidden="true">2.7.</strong> Binary Search Tree</a></li><li class="chapter-item expanded "><a href="algorithms/balanced_search_tree.html"><strong aria-hidden="true">2.8.</strong> Balanced Search Trees</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="algorithms/balanced_search_tree/red_black_bst.html"><strong aria-hidden="true">2.8.1.</strong> Red-Black BSTs</a></li><li class="chapter-item expanded "><a href="algorithms/balanced_search_tree/b_tree.html"><strong aria-hidden="true">2.8.2.</strong> B-Trees</a></li><li class="chapter-item expanded "><a href="algorithms/balanced_search_tree/kd_tree.html"><strong aria-hidden="true">2.8.3.</strong> Kd-Trees</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> System Design</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="system_design/cache.html"><strong aria-hidden="true">3.1.</strong> Cache</a></li></ol></li><li class="chapter-item expanded "><a href="rust_note/rust.html"><strong aria-hidden="true">4.</strong> Rust note</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> General</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="rust_note/general/cpp_memory_model.html"><strong aria-hidden="true">4.1.1.</strong> C++ memory mode</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.</strong> Note from courses</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="rust_note/courses/pattern_matching.html"><strong aria-hidden="true">4.2.1.</strong> Pattern matching</a></li><li class="chapter-item expanded "><a href="rust_note/courses/smart_pointers.html"><strong aria-hidden="true">4.2.2.</strong> Smart pointers</a></li><li class="chapter-item expanded "><a href="rust_note/courses/string.html"><strong aria-hidden="true">4.2.3.</strong> String</a></li></ol></li><li class="chapter-item expanded "><a href="rust_note/tokio.html"><strong aria-hidden="true">4.3.</strong> Note for tokio dev</a></li><li class="chapter-item expanded "><a href="rust_note/resources.html"><strong aria-hidden="true">4.4.</strong> Resources</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Tech notes</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="tech/network_programming.html"><strong aria-hidden="true">5.1.</strong> Network Programming</a></li><li class="chapter-item expanded "><a href="tech/java/java.html"><strong aria-hidden="true">5.2.</strong> Java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tech/java/scheduler.html"><strong aria-hidden="true">5.2.1.</strong> Scheduler stuff</a></li></ol></li><li class="chapter-item expanded "><a href="tech/cli_tools.html"><strong aria-hidden="true">5.3.</strong> CLI tools</a></li></ol></li><li class="chapter-item expanded "><a href="prob_and_stats/mit_course/index.html"><strong aria-hidden="true">6.</strong> Probability and Statistics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="prob_and_stats/maths.html"><strong aria-hidden="true">6.1.</strong> Useful maths equations</a></li><li class="chapter-item expanded "><a href="prob_and_stats/mit_course/chapter_1.html"><strong aria-hidden="true">6.2.</strong> Chapter 1 &amp; 2</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Efficiency Hack</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="efficiency/vi.html"><strong aria-hidden="true">7.1.</strong> üìù Vi editor tips</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Markdown Notes</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="md/md.html"><strong aria-hidden="true">8.1.</strong> Some Markdown Tips</a></li><li class="chapter-item expanded "><a href="md/details.html"><strong aria-hidden="true">8.2.</strong> &lt;details&gt; usage</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Good Tips</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="sub/life_tips.html"><strong aria-hidden="true">9.1.</strong> Life Tips</a></li><li class="chapter-item expanded "><a href="sub/career_tips.html"><strong aria-hidden="true">9.2.</strong> Career Tips</a></li></ol></li><li class="chapter-item expanded "><a href="swedish/index.html"><strong aria-hidden="true">10.</strong> Swedish Learning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="swedish/shows/huss/huss.html"><strong aria-hidden="true">10.1.</strong> TV Show - Huss</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="swedish/shows/huss/s1a1.html"><strong aria-hidden="true">10.1.1.</strong> S√§song 1 - Avsnitt 1</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Food and Drink</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="food_and_drink/cheese.html"><strong aria-hidden="true">11.1.</strong> Cheese study</a></li><li class="chapter-item expanded "><a href="food_and_drink/stockholm_restaurants.html"><strong aria-hidden="true">11.2.</strong> Restaurants in Stockholm</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Personal notebook</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/liufuyang/note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="notebook"><a class="header" href="#notebook">Notebook</a></h1>
<p>This is a personal notebook. <a href="https://github.com/liufuyang/note">See repo here</a>.
Let's see how often I can keep this updated...</p>
<h2 id="how-to-update-my-note"><a class="header" href="#how-to-update-my-note">How to update my note:</a></h2>
<p><a href="https://rust-lang.github.io/mdBook">https://rust-lang.github.io/mdBook</a></p>
<p>And take a look at <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdown Help</a> for some hints.</p>
<ul>
<li><code>mdbook serve --dest-dir docs --open</code></li>
<li>Edit content</li>
<li>Then perhaps build again <code>mdbook build --dest-dir docs</code></li>
<li>Then push </li>
</ul>
<details>
<summary>Some hidden code here</summary>
<pre><pre class="playground"><code class="language-rust">use warp::Filter;

#[tokio::main]
async fn main() {
    let routes = warp::any().map(|| &quot;Hello, World!&quot;);
    warp::serve(routes).run(([127, 0, 0, 1], 3030)).await;
}
</code></pre></pre>
</details>
<h2 id="how-to-add-some-graphs"><a class="header" href="#how-to-add-some-graphs">How to add some graphs?</a></h2>
<p>https://github.com/badboy/mdbook-mermaid</p>
<p>And see the <code>Dockerfile</code> in the repo how to make an image that can build the site.</p>
<h2 id="about-github-page-build"><a class="header" href="#about-github-page-build">About github page build</a></h2>
<p>This github action <a href="https://github.com/peaceiris/actions-gh-pages">peaceiris/actions-gh-pages</a> seems really handy.
<a href="https://github.com/liufuyang/note/actions/workflows/gh-pages.yml">See the config file here</a></p>
<h1 id="note-1"><a class="header" href="#note-1">Note 1</a></h1>
<h2 id="some-random-notes-that-could-be-useful"><a class="header" href="#some-random-notes-that-could-be-useful">Some random notes that could be useful:</a></h2>
<p>How to make http slides:</p>
<p><a href="https://liufuyang.github.io/http-kv/demo.html">https://liufuyang.github.io/http-kv/demo.html</a></p>
<h1 id="todo"><a class="header" href="#todo">ToDo</a></h1>
<h2 id="courses-to-study"><a class="header" href="#courses-to-study">Courses to study</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
<a href="https://www.coursera.org/learn/inferential-statistics-intro">Inferential Statistics</a></li>
<li><input disabled="" type="checkbox"/>
<a href="https://www.coursera.org/learn/statistical-inferences">Improving your statistical inferences</a></li>
</ul>
<h1 id="algorithms"><a class="header" href="#algorithms">Algorithms</a></h1>
<p><img src="https://user-images.githubusercontent.com/161689/114306804-520d8600-9add-11eb-969b-25daea5bcd01.png" alt="image" /></p>
<h1 id="big-o-notations"><a class="header" href="#big-o-notations">Big O notations</a></h1>
<p>Commonly-used notations in the theory of algorithms</p>
<table><thead><tr><th>notation</th><th>example</th><th>provides</th><th align="center">shorthand for</th><th>used to</th></tr></thead><tbody>
<tr><td><strong>Big Theta</strong></td><td>\( \Theta (N^2) \)</td><td>asymptotic order of growth</td><td align="center">\( {1 \over 2} \ N^2 \) <br /> \( 10 \ N^2 \) <br /> \( 5 N^2 + 2 N \log N + 3 N \)</td><td>classify algorithms</td></tr>
<tr><td><strong>Big Oh</strong></td><td>\( O (N^2) \)</td><td>\(\Theta(N^2) \) and smaller</td><td align="center">\( 10 \ N^2 \) <br /> \( 100 \ N \) <br /> \( 2 N \log N + 3 N \)</td><td>develop upper bounds</td></tr>
<tr><td><strong>Big Omega</strong></td><td>\( \Omega (N^2) \)</td><td>\( \Theta(N^2) \) and larger</td><td align="center">\( {1 \over 2} \ N^2 \) <br /> \( N^5 \) <br /> \( N^3 + 2 N \log N + 3 N \)</td><td>develop lower bounds</td></tr>
<tr><td><strong>Tilde</strong> *</td><td>\( \sim 10 \ N^2 \)</td><td>leading term</td><td align="center">\( 10 \ N^2 \) <br /> \( 10 \ N^2 + 22 N \log N \) <br /> \( 10 \ N^2 + 2 N + 37 \)</td><td>provide approximate model</td></tr>
</tbody></table>
<p>* A common mistake is interpreting <code>Big-Oh</code> as an approximate model <code>Tilde</code>.</p>
<h2 id=""><a class="header" href="#"></a></h2>
<p><img src="algorithms/order_of_growth.png" alt="" /></p>
<h1 id="stack-and-queue"><a class="header" href="#stack-and-queue">Stack and Queue</a></h1>
<h2 id="two-major-implementations"><a class="header" href="#two-major-implementations">Two major implementations</a></h2>
<ul>
<li>Linked list impl</li>
<li>Array impl</li>
</ul>
<p>which can both implement stack and queue.</p>
<h2 id="linked-list-impl"><a class="header" href="#linked-list-impl">Linked list impl</a></h2>
<p>For stack or queue, a single direction link list will do,
so only need a <code>head</code> point to the head node, and a <code>tail</code> point to the tail node.</p>
<pre><code>(head) -&gt; (a,) -&gt; (b,) -&gt; (c,)
(tail) - - - - - - - - - - ^
</code></pre>
<p>A simple unsafe Rust implementation could use structures like:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Node&lt;T&gt; {
    element: T,
    next: Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt;,
}

pub struct LinkedList&lt;T&gt; {
    head: Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt;,
    tail: *mut Node&lt;T&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>More code can be see here on <a href="https://github.com/liufuyang/algs4/tree/main/algs_stanford/src">my own bad Rust stack/queue implementation</a></p>
<ul>
<li><code>push</code> add node via <code>head</code>;</li>
<li><code>enqueue</code> add node via <code>tail</code>;</li>
<li><code>pop</code> or <code>dequeue</code>, just take out nodes from <code>head</code>.</li>
</ul>
<p>Or in short <code>adding on both ends, removing from head only</code>.</p>
<h2 id="array-impl"><a class="header" href="#array-impl">Array impl</a></h2>
<pre><code>  0   1   2   3   4   5   6   7
[__, __,  a,  b,  c, __, __, __,]
(head) ---^
(tail) - - - - - - - ^
</code></pre>
<ul>
<li><code>push</code> or <code>enqueue</code>, just add via <code>tail</code>;</li>
<li><code>pop</code> removes nodes from <code>tail</code>;</li>
<li><code>dequeue</code> removes from <code>head</code>;</li>
</ul>
<p>Or in short <code>adding from tail only, removing from both ends</code>.</p>
<p>Other trivial details:</p>
<ul>
<li>When reaching the end while adding, increase capacity by factor of 2;</li>
<li>When <code>tail</code> less than 1/4 of capacity, can reduce capacity by 1/2 of current capacity, to save space;</li>
<li>In Java, when removing element from the list, besides change
head and tail values, also set <code>null</code> to the array so to let
those removed nodes can be garbage collected later. </li>
</ul>
<h2 id="dequeue---a-double-ended-queue"><a class="header" href="#dequeue---a-double-ended-queue">Dequeue - a double-ended queue</a></h2>
<p>Dequeue -a double-ended queue or <code>deque</code> (pronounced ‚Äúdeck‚Äù)
is a generalization of a stack and a queue that supports adding and removing items from either the front or the back of the data structure.</p>
<p>One type of implementation could be using a <code>double linked list</code>, so both ends can remove nodes.</p>
<p>Another approach (I suppose) could be using <code>two stacks</code>, with either stack implementations mentioned above.
Then one stack is kept as <code>positive</code> while another kept as 
<code>negative</code>.</p>
<p>So the <code>deque</code> can probably be implemented as something like:</p>
<pre><code class="language-java">    // add the item to the front
    public void addFirst(Item item) {
        negative.push();
    }

    // add the item to the back
    public void addLast(Item item) {
        positive.push();
    }

    // remove and return the item from the front
    public Optional&lt;Item&gt; removeFirst() {
        if (!negative.isEmpty) {
            return negative.pop();
        } else {
            return positive.dequeue();
        }
    }

    // remove and return the item from the back
    public Optional&lt;Item&gt; removeLast() {
        if (!positive.isEmpty) {
            return positive.pop();
        } else {
            return negative.dequeue();
        }
    }
</code></pre>
<p>Haven't tried to do my homework with the Princeton course,
but hopefully this works. Otherwise the code might later 
be at <a href="https://github.com/liufuyang/algs4/tree/main/algs_princeton/2_queues">here</a>.
Update: As the homework requires <code>constant worst time</code> so 
I used a double linked list to implement it. So I can
just guess now the above idea will work :)</p>
<h2 id="randomizedqueue"><a class="header" href="#randomizedqueue">RandomizedQueue</a></h2>
<p>A <code>RandomizedQueue</code> can be implemented with a normal
array implementation queue, plus using <strong><code>Knuth Shuffle</code></strong>
during <code>enqueue</code> operation:</p>
<pre><code class="language-java">public void enqueue(Item item) {
    if (item == null) {
      throw new IllegalArgumentException();
    }
    if (items.length == tail) {
      resize(Math.max(items.length, size() * 2));
    }
    items[tail] = item;
    tail++;

    swap(tail - 1, StdRandom.uniform(head, tail));
  }
</code></pre>
<p>Key is on that <code>swap</code> call. Basically the shuffle
idea is very simple, when adding a new item into
the array, then randomly select an item from the 
array (including the newly added one) then swap
the newly added one with the selected item.</p>
<p>See <a href="https://github.com/liufuyang/algs4/tree/main/algs_princeton/2_queues">code here</a>.</p>
<p>By the way, this <strong><code>Knuth Shuffle</code></strong> idea seems
pretty powerful as it uses linear time for shuffling
a N-th array. Better than make N random floats and 
sort them to have a new index list.</p>
<h2 id="linked-list-impl-vs-array-impl"><a class="header" href="#linked-list-impl-vs-array-impl">Linked list impl vs Array impl</a></h2>
<p>I guess simply put, </p>
<ul>
<li><code>linked list</code> is good for constant time
operations <strong>in the worst case</strong>, though slower each time, 
an uses more space;</li>
<li><code>resizing array</code> is 
in most cases very fast, occasionally slow when resizing,
with the claim of adding an element has constant <strong>amortized time</strong> cost. And less wasted space</li>
</ul>
<h2 id="priority-queues-aka-binary-heap"><a class="header" href="#priority-queues-aka-binary-heap">Priority Queues (a.k.a Binary heap)</a></h2>
<p>Besides the &quot;linear&quot; array/linked-list type of queue implementation, 
<code>Binary heap</code> can also be used to construct
<strong>an array representation of a heap-ordered complete binary tree</strong>, 
which can be used as a special queue where you can always get the most 
min (or max) value of a queue. See more about it in the search algorithm
session below.</p>
<p>And it can also be used as a sorting algoritm called 
<code>Heap sort</code>. <a href="https://liufuyang.github.io/note/algorithms/sort.html#priority-queue---binary-heap-and-heap-sort">See more notes about Priority Queues here</a></p>
<hr />
<h2 id="use-stackqueue-for-search-algorithm"><a class="header" href="#use-stackqueue-for-search-algorithm">Use stack/queue for Search Algorithm</a></h2>
<p>One quite useful thing about <code>stack</code> and <code>queue</code> is that</p>
<ul>
<li><code>stack</code> can be used for <code>Depth-First Search</code> (DFS)</li>
<li><code>queue</code> can be used for <code>Breadth-First Search</code> (BFS)</li>
</ul>
<p>And <code>Priority queue</code> can be used for even faster search algoritms to 
only focus on the most possible directions (the shortest path for example).</p>
<p><a href="https://liufuyang.github.io/note/algorithms/sort.html#priority-queue---binary-heap-and-heap-sort">See more notes about Priority Queues here</a></p>
<iframe width="640" height="360" src="https://www.youtube.com/embed/WbzNRTTrX0g?t=1557" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Quite interesting.</p>
<p>It seems that a general &quot;Graph Search&quot; type of problem 
can be solved by this abstract framework:</p>
<blockquote>
<ul>
<li><code>agent</code> - entity that perceives its environment and acts upon that environment</li>
<li><code>state</code> - a configuration of the agent and
its environment;
<code>initial state</code> - the state in which the agent begins </li>
<li><code>actions</code> - choices that can be made in a state, like edges in graphs; <code>ACTIONS(s)</code> returns the set of actions that
can be executed in state s</li>
<li><code>transition model</code> or <code>RESULT(s, a)</code>
returns the state resulting from performing action a in state s</li>
<li><code>goal test</code> - way to determine whether a given state
is a goal state</li>
<li><code>path cost</code> - numerical cost associated with a given path</li>
<li><code>frontier</code> - a stack or queue to keep track of the nodes to be explored</li>
</ul>
</blockquote>
<p>Then with a <code>node</code> defined as 
<strong>a data structure that keeps track of</strong></p>
<ul>
<li>a <code>state</code></li>
<li>a <code>parent</code> (node that generated this node)</li>
<li>an <code>action</code> (action applied to parent to get node)</li>
<li>a <code>path cost</code> (from initial state to node)</li>
</ul>
<p>Then a search algorithm can be defined as:</p>
<h3 id="search-algorithm"><a class="header" href="#search-algorithm"><strong>Search algorithm</strong></a></h3>
<ul>
<li>Start with a <code>frontier</code> that contains the initial state.</li>
<li>Start with an empty explored set.</li>
<li>Repeat:
<ul>
<li>If the <code>frontier</code> is empty, then no solution.</li>
<li>Remove a <code>node</code> from the <code>frontier</code>. (Also using a set to keep track of visited <code>nodes</code>)</li>
<li>If <code>node</code> contains goal state (<code>goal test</code>), return the solution.</li>
<li>Add the <code>node</code> to the explored set.</li>
<li>Expand <code>node</code> (<code>ACTIONS + RESULTS</code>), add resulting <code>nodes</code> to the <code>frontier</code> if they
aren't already in the <code>frontier</code> or the explored set.</li>
</ul>
</li>
</ul>
<p>For example, in a simple maze search problem, the <code>state</code> of 
the node is just the current position, the <code>actions</code> of the 
node is just the next possible directions that the agent can go to, leading to the following states.</p>
<p>In a social network problem, for example in the homework's
movie actors <code>degree</code> problem, the <code>state</code> of 
the node is just the actor id, the <code>actions</code> of the 
node is just the movies this actor performed, which can lead to other <code>state</code> (or actors).</p>
<p>Some example code on the <code>degree</code> problem might look like this.</p>
<pre><code class="language-python">def shortest_path(source, target):
    &quot;&quot;&quot;
    Returns the shortest list of (movie_id, person_id) pairs that connect the source to the target.
    
    If no possible path, returns None.

    Action: movie id
    State: person id
    &quot;&quot;&quot;

    start = Node(state=source, parent=None, action=None)
    frontier = QueueFrontier()
    frontier.add(start)
    explored = set()

    while True:
        if frontier.empty():
            return None
        
        node = frontier.remove()
        explored.add(node.state)

        for action in people[node.state][&quot;movies&quot;]:
            for state in movies[action][&quot;stars&quot;]: 
                if not frontier.contains_state(state) and state not in explored:
                    child = Node(state=state, parent=node, action=action)
                    frontier.add(child)

                    checkNode = child
                    if checkNode.state == target:
                        actions_and_states = []
                        while checkNode.parent is not None:
                            actions_and_states.append((checkNode.action, checkNode.state))
                            checkNode = checkNode.parent
                        actions_and_states.reverse()
                        return actions_and_states
</code></pre>
<p>And normally a <code>queue</code> is used as the <code>frontier</code> in order 
to perform <code>Breadth-First Search</code> - which seem to be the 
best option for general problems as you want to find the shortest path to the goal.</p>
<p>One variant of the algorithms is a <strong>greedy best-first search</strong></p>
<ul>
<li><code>A* search</code>: search algorithm that expands node with
lowest value of <code>g(n) + h(n)</code>
<ul>
<li><code>g(n)</code> = cost to reach node</li>
<li><code>h(n)</code> = estimated cost to goal</li>
<li>optimal if
<ul>
<li><code>h(n)</code> is admissible (never overestimates the
true cost), and</li>
<li><code>h(n)</code> is consistent (for every node n and
successor n' with step cost c, <code>h(n) ‚â§ h(n') + c)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>To facilitate a fast way to pick &quot;a lowest value (or highest) from a queue&quot;,
a data structure called <a href="https://liufuyang.github.io/note/algorithms/sort.html#priority-queue---binary-heap-and-heap-sort"><code>Priority Queue</code></a>
can be used as it as uses <code>binary heap</code> to achieve <code>log N</code> order-of-growth for 
both queue insert and queue delete operation. </p>
<p>Another variant of this type of algorithm is <code>Adversarial Search</code> - which is used for problems like Tic-Tac-Toe games</p>
<p>So for games:</p>
<ul>
<li>S0 : initial state</li>
<li>PLAYER(s) : returns which player to move in state s</li>
<li>ACTIONS(s) : returns legal moves in state s</li>
<li>RESULT(s, a) : returns state after action a taken in state s</li>
<li>TERMINAL(s) : checks if state s is a terminal state</li>
<li>UTILITY(s) : final numerical value for terminal state s</li>
</ul>
<p>One method is called <strong><code>MinMax</code></strong></p>
<ul>
<li>Given a state s:</li>
<li>MAX picks action a in ACTIONS(s) that produces
highest value of MIN-VALUE(RESULT(s, a))</li>
<li>MIN picks action a in ACTIONS(s) that produces
smallest value of MAX-VALUE(RESULT(s, a))</li>
</ul>
<p>Or in code as:</p>
<pre><code>function MAX-VALUE(state):
 if TERMINAL(state):
 return UTILITY(state)
 v = -‚àû
 for action in ACTIONS(state):
 v = MAX(v, MIN-VALUE(RESULT(state, action)))
 return v

function MIN-VALUE(state):
 if TERMINAL(state):
 return UTILITY(state)
 v = ‚àû
 for action in ACTIONS(state):
 v = MIN(v, MAX-VALUE(RESULT(state, action)))
 return v
</code></pre>
<p>And some special pruning method such as Alpha-Beta Pruning is
needed for game problems with very large search space.</p>
<h1 id="divide-and-conquer"><a class="header" href="#divide-and-conquer">Divide and Conquer</a></h1>
<ol>
<li>Divide into smaller problems</li>
<li>Conquer via recursive calls</li>
<li>Combine solutions of sub-problems into one for the 
original problem.</li>
</ol>
<h2 id="typical-problems"><a class="header" href="#typical-problems">Typical problems:</a></h2>
<ul>
<li>
<p>Merge sort (recursive or bottom up)</p>
</li>
<li>
<p>Karatsuba Multiplication</p>
</li>
<li>
<p>Counting Inversions</p>
<p>Example: (1, 3, 5, 2, 4, 6), having inversions: (3,2), (5,2), (5, 4)</p>
<p>Can be used for: calculate the similarity between 2 persons' 10 movies sort order.</p>
</li>
</ul>
<h2 id="counting-inversions"><a class="header" href="#counting-inversions">Counting Inversions</a></h2>
<p>Naive implementation is \( O(n^2) \) as we need 2 for loops.
Via divide and conquer, what we need is this</p>
<pre><code>Count(array a, length n) {
    if n == 1 return 0
    else 
      x = Count(left half of a, n/2)
      y = Count(right half of a, n/2)
      z = CountSplitInv(a, n)

      return x + y + z
}
</code></pre>
<p><code>CountSplitInv</code> counting the split inversions, where first
index is in the first half array, and second index is in the 
second half array.
Then the question is, can we do <code>CountSplitInv</code> with 
\( O(n) \)? If so, the divide part has \( O(\log n) \), which gives us the final algorithms speed of \( O(n \log n) \). Intuitively feels not possible.</p>
<h3 id="piggybacking-on-merge-sort"><a class="header" href="#piggybacking-on-merge-sort">Piggybacking on Merge Sort</a></h3>
<pre><code>SortAndCount(array a, length n) {
    if n == 1 return 0
    else 
      b, x = SortAndCount(left half of a, n/2)
      c, y = SortAndCount(right half of a, n/2)
      d, z = MergeAndCountSplitInv(b, c, n)

      return d, x + y + z
}
</code></pre>
<p>After sorting, we can do the trick, or &quot;piggybacking&quot; 
while merge:</p>
<pre><code>i=0
j=0
z=0
for k = 0 .. n-1 {
    if b[i] &lt;= c[j] {
        d[k] = b[i]
        i++
    } else {
        d[k] = c[j]
        j++
        z += b.len - i // piggybacking part of merge
    }
}
</code></pre>
<p>So if <code>b</code>'s element all less than <code>c</code>'s element, 
before <code>j</code> starts to add, <code>i</code> will be as <code>b.len</code>, making <code>z=0</code> in the end.</p>
<p>Or the general claim:</p>
<blockquote>
<p>Claim: the numberr of split inversions involving an element 
<code>c_j</code> from 2nd array <code>c</code> is precisely the number of elements
left in the 1st array <code>b</code> when <code>c_j</code> is copied to the output <code>d</code>.</p>
</blockquote>
<p>So basically we ended with a very similar thing to Merge Sort,
only one more operation on the merge operations. So we
achieved \( O(n \log n) \). Pretty impressive.</p>
<h2 id="the-master-method"><a class="header" href="#the-master-method">The Master Method</a></h2>
<p>\[ 
\begin{align}
\text{If }  \quad  T(n) &amp; &lt;= a T (\frac{n}{b}) + O(n^d) \\ 
\text{Then } \quad  T(n) &amp; =
\begin{cases}
O(n^d \log n)       &amp; \quad \text{if } a = b^d \text{ (Case 1)} \\
O(n^d)              &amp; \quad \text{if } a &lt; b^d \text{ (Case 2)} \\
O(n^{\log_{b}{a} }) &amp; \quad \text{if } a &gt; b^d \text{ (Case 3)}
\end{cases}
\end{align}
\]</p>
<p>For example</p>
<ul>
<li>merge sort having <code>a=2, b=2, d=1</code> so it is \( O(n \log n)  \), which is case 1</li>
<li>binary search having <code>a=1, b=2, d=0</code> so it is \( O(\log n)  \), which is case 1</li>
<li>Karatsuba Multiplication <code>a=3, b=2, d=1</code> so it is \( O(n^{\log_2 3}) = O(n^{1.59}) \), which is case 3</li>
</ul>
<p>A simple proof could be: At each level \( j=0,1,2,..,log_b(n) \), there are \(a^j\) subproblems, each of size \( n \over b^j \).
Then the total number of operations needed to solve the whole
problem for each level is:
\[
a^j  C {\left[\frac{n}{b^j}\right]}^d = C n^d {\left[\frac{a}{b^d}\right]}^j
\]
Thus the total number of the whole problem is:
\[
\text{total work} \leq \displaystyle\sum_{j=0}^{\log_b n} C n^d {\left[\frac{a}{b^d}\right]}^j
\]
where</p>
<ul>
<li>\( a \): rate of subproblem proliferation (<code>RSP</code>)</li>
<li>\( b^d \): rate of work shrinkage per subproblem (<code>RWS</code>)</li>
</ul>
<p>And we see:</p>
<ul>
<li>If <code>RSP &lt; RWS</code>, then the amount of work is decreasing with the recursion level <code>j</code></li>
<li>If <code>RSP &gt; RWS</code>, then the amount of work is increasing with the recursion level <code>j</code></li>
<li>If <code>RSP = RWS</code>, then the amount of work is the same at every recursion level <code>j</code></li>
</ul>
<h1 id="sort"><a class="header" href="#sort">Sort</a></h1>
<h2 id="merge-sort"><a class="header" href="#merge-sort">Merge sort</a></h2>
<ul>
<li>\( n \log(n) \) in worst case</li>
<li>a <code>stable</code> sort (sort by column A, then sort by column B, then for the same B, order of A preserves)</li>
<li>simple to understand, divide and conquer (or bottom up to avoid recursion); <code>log(n)</code> levels, and each level's merge takes <code>n</code> operation, thus \( n \log(n) \)  will do</li>
</ul>
<h2 id="quick-sort"><a class="header" href="#quick-sort"><strong>Quick sort</strong></a></h2>
<ul>
<li>
<p>\( n \log(n) \) in worst case</p>
</li>
<li>
<p>not a <code>stable</code> sort</p>
</li>
<li>
<p>more tricky but not difficult to understand, divide and conquer: <br></p>
<p>make sure an element's left are all smaller (or equal to) it, and the
right part are all bigger than it (let's called it <code>partitioned</code>); then continue to sort both on left and right part;</p>
</li>
</ul>
<h3 id="quick-sort-partition"><a class="header" href="#quick-sort-partition">Quick sort partition</a></h3>
<p>To make an array <code>partitioned</code> by, for eg. the first element: <br></p>
<pre><code>[3, 5, 2, 6, 1, 4]
i---^
j---^
</code></pre>
<p>Start with <code>i</code> and <code>j</code> both after first element.
<code>i</code> stands for <code>left of me is smaller than pivot</code>; <code>j</code> stands for <code>left of me is partitioned</code>. <br></p>
<p>So basically we loop each element until <code>j</code> is <code>n</code>;<br></p>
<p>For each step:<br></p>
<ul>
<li>If <code>a[j] &gt;= pivot</code>, then just <code>j++</code>;</li>
<li>If <code>a[j] &lt; pivot</code>, then <code>swap(i, j)</code>, <code>i++, j++</code>;</li>
<li>When <code>j</code> reaches the end, <code>swap(i-1, 0)</code>, return <code>i-1</code></li>
</ul>
<pre><code>[3, 5, 2, 6, 1, 4]
i---^
j------^
</code></pre>
<p>swap</p>
<pre><code>[3, 2, 5, 6, 1, 4]
i------^
j---------^
</code></pre>
<pre><code>[3, 2, 5, 6, 1, 4]
i------^
j------------^
</code></pre>
<p>swap</p>
<pre><code>[3, 2, 1, 6, 5, 4]
i---------^
j------------^
</code></pre>
<pre><code>[3, 2, 1, 6, 5, 4]
i---------^
j-----------------^
</code></pre>
<p>then last swap and return <code>i=2</code></p>
<pre><code>[1, 2, 3, 6, 5, 4]
i---------^
j-----------------^
</code></pre>
<h3 id="quick-sort-pivot-choose"><a class="header" href="#quick-sort-pivot-choose">Quick sort pivot choose</a></h3>
<p>If an input array is already sorted, simply choose pivod as the first element
of the array will result the running time of quick sort to be \( n^2 \).
That is not quick.</p>
<p>So if some <em>&quot;maigc&quot;</em> method out there can always choose the midiean value 
as the pivot, then the quick sort running back falls back to \( n \log(n) \).</p>
<p>A common way is to choose a <strong>random</strong> element as pivot.
So with <strong>Random Pivot</strong> implemented, it can be approved 
that the total number of comparisons of quik-sort 
algorithms is equal or less than  \( 2 n \ln(n) \), 
appriximately.</p>
<p>So quick sort will have more comparisions than merge sort,
but as it needs no extra memory, so it is generally faster
than merge sort.</p>
<h3 id="quick-sort-partition-can-be-tricky"><a class="header" href="#quick-sort-partition-can-be-tricky">Quick sort partition can be tricky</a></h3>
<p>Many textbook implementations go quadratic if array</p>
<ul>
<li>Is sorted or reverse sorted</li>
<li>Has many duplicates (even if randomized) (the standford course impl perhaps?)</li>
</ul>
<h3 id="quick-sort-practical-improvements"><a class="header" href="#quick-sort-practical-improvements">Quick sort practical improvements</a></h3>
<ul>
<li>Median of sample
<ul>
<li>Best choice of pivot item = median</li>
<li>Estimate true median by taking median of sample</li>
<li>Median-of-3 (random) items (which is also used in Rust's quicksort code)</li>
</ul>
</li>
</ul>
<h3 id="quick-select"><a class="header" href="#quick-select">Quick select</a></h3>
<p>The expected running time to find the median (or the kth largest value) of an array of nn distinct keys using randomized quickselect is <em>linear</em>.</p>
<h3 id="duplicated-keys---3-way-partition"><a class="header" href="#duplicated-keys---3-way-partition">Duplicated keys - 3-way partition</a></h3>
<p>Simply put all equal values together </p>
<ul>
<li>3-way partitioning: Goal - partition array into 3 parts
<ul>
<li>lo, lt, gt, hi</li>
<li>start with <code>lt=lo+1, gt=lo+1</code></li>
<li>end with <code>hi</code> goes out length range</li>
</ul>
</li>
</ul>
<p>For each step:<br></p>
<ul>
<li>If <code>a[hi] &gt; pivot</code>, then just <code>hi++</code>;</li>
<li>If <code>a[hi] == pivot</code>, then <code>swap(gt, hi)</code>, <code>gt++, hi++</code></li>
<li>If <code>a[hi] &lt; pivot</code>, then <code>swap(gt, hi)</code>,  <code>swap(lt, gt)</code>, <code>lt++, gt++, hi++</code>;</li>
<li>When <code>hi</code> reaches the end, <code>swap(lt-1, 0)</code>, return <code>lt-1, gt</code></li>
</ul>
<pre><code>[3, 2, 1, 3, 3, 5, 6, 3, 1]
lt--------^
gt--------------^
hi-----------------^
</code></pre>
<pre><code>[3, 2, 1, 3, 3, 5, 6, 3, 1]
lt--------^
gt--------------^
hi--------------------^
</code></pre>
<pre><code>[3, 2, 1, 3, 3, 3, 6, 5, 1]
lt--------^
gt-----------------^
hi--------------------^
</code></pre>
<pre><code>[3, 2, 1, 3, 3, 3, 6, 5, 1]
lt--------^
gt-----------------^
hi-----------------------^
</code></pre>
<p><code>swap(gt, hi)</code></p>
<pre><code>[3, 2, 1, 3, 3, 3, 1, 5, 6]
lt--------^
gt-----------------^
hi-----------------------^
</code></pre>
<p><code>swap(lt, gt)</code></p>
<pre><code>[3, 2, 1, 1, 3, 3, 3, 5, 6]
lt--------^
gt-----------------^
hi-----------------------^
</code></pre>
<p><code>lt++, gt++, hi++</code></p>
<pre><code>[3, 2, 1, 1, 3, 3, 3, 5, 6]
lt-----------^
gt--------------------^
hi--------------------------^
</code></pre>
<p>Or a &quot;from two end&quot; approach could be like this:</p>
<p><img src="https://user-images.githubusercontent.com/161689/113506443-35a1a480-9545-11eb-8772-e2066045a12e.png" alt="image" /></p>
<h3 id="bottom-line"><a class="header" href="#bottom-line">Bottom line</a></h3>
<p>Randomized quicksort with 3-way partitioning reduced running time from linearithmic to liner in broad class of applications.</p>
<h3 id="java-implementation"><a class="header" href="#java-implementation">Java Implementation</a></h3>
<p><code>Arrays.sort()</code> in Java use mergesort instead of quicksort when sorting <em>reference types</em>, as it is <strong>stable</strong> and guarantees \( n \log(n) \) performance</p>
<h3 id="tukeys-ninther"><a class="header" href="#tukeys-ninther">Tukey's ninther</a></h3>
<p>Median of the median of 3 samples.
Approximates the median of 9 evenly spaced entries. Uses at most 12 compares.</p>
<p>Seems used in Rust's quicksort as well.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p><img src="https://user-images.githubusercontent.com/161689/117543270-55ccf380-b01c-11eb-9b12-a96d4f0cccdf.png" alt="summary" /></p>
<hr />
<h2 id="priority-queue---binary-heap-and-heap-sort"><a class="header" href="#priority-queue---binary-heap-and-heap-sort">Priority Queue - Binary Heap and Heap Sort</a></h2>
<p><a href="https://d3c33hcgiwev3.cloudfront.net/_b85511f4ea522da4caf6b02d10fc0bad_24PriorityQueues.pdf?Expires=1621555200&amp;Signature=ErS4FX0or3b2I%7EF14QbeAblhGzPnhfvTBc%7EkolEojufmcyOIODw5gxHAS4p0o7DlH9JO79uAbqIoitA1H08-3x8BL3rExU5lOczQORb62RHLjau-ht8MSvPuJ1J9y7rNfHmyYleDuZ3IQgQkZwtRZk6kOXholuL6raotiQCyweM_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A">Full lecture slides here</a></p>
<p><strong>Priority Queue</strong> is super useful for fast 
Breadth-First Search (BFS) in algorithms like A* search, 
or it can be used in sort algorithm called Heap Sort 
(basically you make a Priority queue then pop out elements and they will be in order)</p>
<p>It needs to implement two operations efficiently:</p>
<ul>
<li>remove the maximum</li>
<li>insert</li>
</ul>
<p>Priority queue applications</p>
<ul>
<li>Event-driven simulation. [customers in a line, colliding particles]</li>
<li>Numerical computation. [reducing roundoff error]</li>
<li>Data compression. [Huffman codes]</li>
<li>Graph searching. [Dijkstra's algorithm, Prim's algorithm]</li>
<li>Number theory. [sum of powers]</li>
<li>Artificial intelligence. [<a href="https://liufuyang.github.io/note/algorithms/stack_queue.html#search-algorithm">A* search</a>]</li>
<li>Statistics. [maintain largest M values in a sequence]</li>
<li>Operating systems. [load balancing, interrupt handling]</li>
<li>Discrete optimization. [bin packing, scheduling]</li>
<li>Spam filtering. [Bayesian spam filter]</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/117346317-e2a27080-aea7-11eb-90b1-c21663dd84c5.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/117346449-09f93d80-aea8-11eb-826f-74dd551aab7d.png" alt="image" /></p>
<p><strong>Priority Queue</strong> can be implemented via <strong>binary heap</strong> - which 
is an <em>array representation of a heap-ordered complete binary tree</em>.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118765898-fe305280-b87b-11eb-8e7e-118bc8a3ec7d.png" alt="image" /></p>
<ul>
<li>Largest key is <code>a[1]</code>, which is root of binary tree.</li>
<li>Can use array indices to move through tree.
<ul>
<li>Parent of node at <code>k</code> is at <code>k/2</code>.</li>
<li>Children of node at <code>k</code> are at <code>2k</code> and <code>2k+1</code>.</li>
</ul>
</li>
</ul>
<h3 id="binary-heap"><a class="header" href="#binary-heap">Binary Heap</a></h3>
<p>The <em>binary heap</em> is a data structure that can efficiently support 
the basic priority-queue operations. A <em>binary tree</em> is <em>heap-ordered</em> 
if the key in each node is larger than or equal to the keys in that 
node's two children (if any).</p>
<ul>
<li>Height of complete tree with N nodes is <code>lg N</code></li>
<li>Array representation, with indices start at 1, largest key at the root</li>
<li>Take nodes in level order</li>
<li>No explicit links needed!</li>
<li>Largest key is a[1], which is root of binary tree</li>
<li>Can use array indices to move through tree
<ul>
<li>Parent of node at k is at <code>k/2</code></li>
<li>Children of node at k are at <code>2k</code> and <code>2k+1</code></li>
</ul>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/117347090-e97db300-aea8-11eb-806c-53f13a13278c.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117540777-10ef8f80-b011-11eb-9ce7-4e84849c7592.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117540789-22d13280-b011-11eb-8be3-8b49a7024590.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117540819-41cfc480-b011-11eb-9759-473a68cc84ec.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117540835-5318d100-b011-11eb-86a7-40f2be793c57.png" alt="image" /></p>
<p>Here is the code summary:</p>
<pre><code class="language-java">public class MaxPQ&lt;Key extends Comparable&lt;Key&gt;&gt;
{
 private Key[] pq;
 private int N;
 public MaxPQ(int capacity)
 { pq = (Key[]) new Comparable[capacity+1]; }
 
 public boolean isEmpty()
 { return N == 0; }
 
 private boolean less(int i, int j)
 { return pq[i].compareTo(pq[j]) &lt; 0; }
 
 private void exch(int i, int j)
 { Key t = pq[i]; pq[i] = pq[j]; pq[j] = t; }

 // promotion
 private void swim(int k)
 {
   while (k &gt; 1 &amp;&amp; less(k/2, k)) {
    exch(k, k/2);
    k = k/2;
   }
 }
 
 // insert
 public void insert(Key x) {
   pq[++N] = x;
   swim(N);
 }
 
 // demotion
 private void sink(int k) {
   while (2*k &lt;= N) {
     int j = 2*k;
     if (j &lt; N &amp;&amp; less(j, j+1)) j++;
     if (!less(k, j)) break;
     exch(k, j);
     k = j;
   }
 }
 
 // delete max
 public Key delMax() {
   Key max = pq[1];
   exch(1, N--);
   sink(1);
   pq[N+1] = null; // prevent loitering
   return max;
 }
}
</code></pre>
<p><img src="https://user-images.githubusercontent.com/161689/117541435-20bca300-b014-11eb-9af0-42552bd18b68.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117541564-bbb57d00-b014-11eb-8510-f5344ceed736.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/117542117-97a76b00-b017-11eb-8da4-3962bdb764f9.png" alt="image" /></p>
<p>One more note: Use immutable keys if you can!</p>
<h2 id="heapsort"><a class="header" href="#heapsort">Heapsort</a></h2>
<p><img src="https://user-images.githubusercontent.com/161689/117542715-fa9a0180-b019-11eb-8768-843aee823200.png" alt="image" /></p>
<pre><code class="language-java"> public static void sort(Comparable[] a) {
   int N = a.length;
   
   // first pass - heap construction
   for (int k = N/2; k &gt;= 1; k--)
     sink(a, k, N);
   
   // second pass - remove max one at a time
   while (N &gt; 1) {
     exch(a, 1, N);
     sink(a, 1, --N);
   }
 }
</code></pre>
<ul>
<li><strong>Heap construction is in linear time, uses ‚â§ 2 N compares and exchanges</strong></li>
<li><strong>No extra memory needed, ‚â§ 2 N log N compares and exchanges !!!</strong></li>
</ul>
<p><strong>Heapsort significane</strong> In-place sorting algorithm</p>
<ul>
<li>Mergesort: need extra space, (otherwise there is a not practical way)</li>
<li>Quicksort: quadratic time in worst case (N ln N via probabilistic guarantee, fast in practise) </li>
<li>Heapsort: Yes ! 2 N log N worst case</li>
</ul>
<p><strong>Bottom line</strong>. Heapsort is optimal for both time and space, but:</p>
<ul>
<li>Inner loop longer than quicksort‚Äôs. (each time sink needs to compare with 2 children)</li>
<li>Makes poor use of cache memory. (memory ref jumps around too much)</li>
<li>Not stable.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/117543270-55ccf380-b01c-11eb-9b12-a96d4f0cccdf.png" alt="summary" /></p>
<h1 id="dynamic-programming"><a class="header" href="#dynamic-programming">Dynamic programming</a></h1>
<h2 id="fibonacci"><a class="header" href="#fibonacci">Fibonacci</a></h2>
<h3 id="recursion---exponential-waste"><a class="header" href="#recursion---exponential-waste">Recursion - Exponential waste</a></h3>
<p>A novice programmer might implement a recersion like this below. But it has a problem called <code>expoential waste</code>.</p>
<pre><code class="language-java">public class FibonacciR
{
  public static long F(int n)
  {
    if (n == 0) return 0;
    if (n == 1) return 1;
    return F(n-1) + F(n-2);
  }
  public static void main(String[] args)
  {
    int n = Integer.parseInt(args[0]);
    StdOut.println(F(n));
  }
}
</code></pre>
<p>The issue of the recursion above is that there are many duplicated calculations performed.
So the core of the algorithms of opertimization is to reduced the number of operations.
And since we have many calculation already done so there should be a way to save the 
results, then later calculations can use the previous calculatined values.</p>
<p>This could be the core idea of <code>Dynamic programming</code>.</p>
<h3 id="avoiding-exponential-waste"><a class="header" href="#avoiding-exponential-waste">Avoiding exponential waste</a></h3>
<p>Memoization</p>
<ul>
<li>Maintain an array <code>memo[]</code> to
remember all computed values.</li>
<li>If value known, just return it.</li>
<li>Otherwise, compute it, remember
it, and then return it.</li>
</ul>
<pre><code class="language-java">public class FibonacciM
{
 static long[] memo = new long[100];
 public static long F(int n)
 {
  if (n == 0) return 0;
  if (n == 1) return 1;
  if (memo[n] == 0)
    memo[n] = F(n-1) + F(n-2);
  return memo[n];
 }
 public static void main(String[] args)
 {
  int n = Integer.parseInt(args[0]);
  StdOut.println(F(n));
 }
}
</code></pre>
<h2 id="dynamic-programming-1"><a class="header" href="#dynamic-programming-1">Dynamic programming</a></h2>
<p>Dynamic programming.</p>
<ul>
<li>Build computation from the <strong>&quot;bottom up&quot;</strong>.</li>
<li>Solve small subproblems and save solutions.</li>
<li>Use those solutions to build bigger solutions.</li>
</ul>
<pre><code class="language-java">public class Fibonacci
{
  public static void main(String[] args)
  {
    int n = Integer.parseInt(args[0]);
    long[] F = new long[n+1];
    F[0] = 0; F[1] = 1;
    for (int i = 2; i &lt;= n; i++)
      F[i] = F[i-1] + F[i-2];
    StdOut.println(F[n]);
  }
}
</code></pre>
<h3 id="dp-example-longest-common-subsequence-lcs"><a class="header" href="#dp-example-longest-common-subsequence-lcs">DP example: Longest common subsequence (LCS)</a></h3>
<p><img src="https://user-images.githubusercontent.com/161689/112751290-78a3cb00-8fcd-11eb-9225-5c8f086e3cd0.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/112751326-a5f07900-8fcd-11eb-8cc9-f93de888ab5f.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/112751344-bdc7fd00-8fcd-11eb-95b8-e5cf29b7f606.png" alt="image" /></p>
<h3 id="lcs-length-implementation"><a class="header" href="#lcs-length-implementation">LCS length implementation</a></h3>
<pre><code class="language-java">public class LCS
{
  public static void main(String[] args)
  {
    String s = args[0];
    String t = args[1];
    int M = s.length();
    int N = t.length();
    int[][] opt = new int[M+1][N+1];
    for (int i = M-1; i &gt;= 0; i--)
      for (int j = N-1; j &gt;= 0; j--)
        if (s.charAt(i) == t.charAt(j))
          opt[i][j] = opt[i+1][j+1] + 1;
        else
          opt[i][j] = Math.max(opt[i+1][j], opt[i][j+1]);
    System.out.println(opt[0][0]);
 }
}
</code></pre>
<p><img src="https://user-images.githubusercontent.com/161689/112755860-e0184580-8fe2-11eb-9291-37f63af490d9.png" alt="image" /></p>
<p>More notes will come when the alg course touches on dynamic programming later. The above content are from the Princeton's 
course <em>Computer Science: Programming with a Purpose</em>.</p>
<h1 id="a--search-homework"><a class="header" href="#a--search-homework">A * Search homework</a></h1>
<ul>
<li><a href="https://liufuyang.github.io/note/algorithms/stack_queue.html#use-stackqueue-for-search-algorithm">My own notes for search algorithm via CS50 course</a></li>
</ul>
<p><a href="https://coursera.cs.princeton.edu/algs4/assignments/8puzzle/specification.php">Write a program</a> to solve the 8-puzzle problem (and its natural generalizations) using the <strong>A* search algorithm</strong>.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118130722-fc8b0880-b3fd-11eb-9dea-1a0591a6da6a.png" alt="image" /></p>
<h3 id="the-problem"><a class="header" href="#the-problem">The problem</a></h3>
<p>The <a href="http://en.wikipedia.org/wiki/Fifteen_puzzle">8-puzzle</a> is a sliding puzzle that is played on a 3-by-3 grid with 8 square tiles labeled 1 through 8, plus a blank square. The goal is to rearrange the tiles so that they are in row-major order, using as few moves as possible. You are permitted to slide tiles either horizontally or vertically into the blank square. The following diagram shows a sequence of moves from an initial board (left) to the goal board (right).</p>
<p><img src="https://user-images.githubusercontent.com/161689/118130883-25130280-b3fe-11eb-9049-1c9142a7c9a4.png" alt="image" /></p>
<h3 id="board-data-type"><a class="header" href="#board-data-type">Board data type</a></h3>
<p>To begin, create a data type that models an n-by-n board with sliding tiles. Implement an immutable data type Board with the following API:</p>
<pre><code class="language-java">public class Board {

    // create a board from an n-by-n array of tiles,
    // where tiles[row][col] = tile at (row, col)
    public Board(int[][] tiles)
                                           
    // string representation of this board
    public String toString()

    // board dimension n
    public int dimension()

    // number of tiles out of place
    public int hamming()

    // sum of Manhattan distances between tiles and goal
    public int manhattan()

    // is this board the goal board?
    public boolean isGoal()

    // does this board equal y?
    public boolean equals(Object y)

    // all neighboring boards
    public Iterable&lt;Board&gt; neighbors()

    // a board that is obtained by exchanging any pair of tiles
    public Board twin()

    // unit testing (not graded)
    public static void main(String[] args)

}
</code></pre>
<p><em>Constructor</em>.  You may assume that the constructor receives an n-by-n array containing the \( n^2 \) integers between 0 and \(n^2 ‚àí 1\), where 0 represents the blank square. You may also assume that <code>2 ‚â§ n &lt; 128</code>.</p>
<p><em>String representation</em>. <code>The toString()</code> method returns a string composed of n + 1 lines. The first line contains the board size n; the remaining n lines contains the n-by-n grid of tiles in row-major order, using 0 to designate the blank square.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118242131-45de6500-b49d-11eb-8db4-a7af8ee80e57.png" alt="string representation" /></p>
<p><em>Hamming and Manhattan distances</em>.  To measure how close a board is to the goal board, we define two notions of distance. 
The <code>Hamming distance</code> betweeen a board and the goal board is the number of tiles in the wrong position.
The <code>Manhattan distance</code> between a board and the goal board is the sum of the Manhattan distances (sum of the vertical and horizontal distance) from the tiles to their goal positions.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118242364-8b029700-b49d-11eb-9e29-3d0d0a4637c1.png" alt="distance" /></p>
<p><em>Comparing two boards for equality</em>. Two boards are equal if they are have the same size and their corresponding tiles are in the same positions.
The <code>equals()</code> method is inherited from <code>java.lang.Object</code>, so it must obey all of Java‚Äôs requirements.</p>
<p><em>Neighboring boards</em>.  The <code>neighbors()</code> method returns an iterable containing the neighbors of the board. Depending on the location of the blank square, a board can have 2, 3, or 4 neighbors.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118242497-b1c0cd80-b49d-11eb-8c55-24620bab212a.png" alt="neighbors" /></p>
<p><em>Unit testing</em>. Your <code>main()</code> method should call each public method directly and help verify that they works as prescribed (e.g., by printing results to standard output).</p>
<p><em>Performance requirements</em>.  Your implementation should support all Board methods in time proportional to n2 (or better) in the worst case.</p>
<p><strong>A* search</strong>. Now, we describe a solution to the 8-puzzle problem that illustrates a general artificial intelligence methodology known as the <a href="http://en.wikipedia.org/wiki/A*_search_algorithm">A* search algorithm</a>.
We define a <code>search node</code>(or called as <code>state</code> in <a href="https://liufuyang.github.io/note/algorithms/stack_queue.html#use-stackqueue-for-search-algorithm">other context</a>) of the game to be a board, the number of moves made to reach the board, and the previous search node. First, insert the initial search node (the initial board, 0 moves, and a null previous search node) into a <code>priority queue</code>. Then, delete from the priority queue the search node with the minimum priority, and insert onto the priority queue all neighboring search nodes (those that can be reached in one move from the dequeued search node). Repeat this procedure until the search node dequeued corresponds to the goal board.</p>
<p>The efficacy of this approach hinges on the choice of <em>priority function</em> for a search node. We consider two priority functions:</p>
<ul>
<li><em>The Hamming priority</em> function is the Hamming distance of a board plus the number of moves made so far to get to the search node. Intuitively, a search node with a small number of tiles in the wrong position is close to the goal, and we prefer a search node if has been reached using a small number of moves.</li>
<li><em>The Manhattan priority</em> function is the Manhattan distance of a board plus the number of moves made so far to get to the search node.</li>
</ul>
<p>To solve the puzzle from a given search node on the priority queue, the total number of moves we need to make (including those already made) is at least its priority, using either the Hamming or Manhattan priority function. Why? Consequently, when the goal board is dequeued, we have discovered not only a sequence of moves from the initial board to the goal board, but one that makes the <em>fewest</em> moves. (Challenge for the mathematically inclined: prove this fact.)</p>
<p><em>Game tree</em>. One way to view the computation is as a game tree, where each search node is a node in the game tree and the children of a node correspond to its neighboring search nodes. The root of the game tree is the initial search node; the internal nodes have already been processed; the leaf nodes are maintained in a <em>priority queue</em>;
at each step, the A* algorithm removes the node with the smallest priority from the priority queue and processes it (by adding its children to both the game tree and the priority queue).</p>
<p>For example, the following diagram illustrates the game tree after each of the first three steps of running the A* search algorithm on a 3-by-3 puzzle using the Manhattan priority function.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118252728-601e4000-b4a9-11eb-9e9d-1c3076eb4cac.png" alt="image" /></p>
<p><strong>Solver data type</strong>. In this part, you will implement A* search to solve n-by-n slider puzzles. Create an immutable data type Solver with the following API:</p>
<pre><code class="language-java">public class Solver {

    // find a solution to the initial board (using the A* algorithm)
    public Solver(Board initial)

    // is the initial board solvable? (see below)
    public boolean isSolvable()

    // min number of moves to solve initial board; -1 if unsolvable
    public int moves()

    // sequence of boards in a shortest solution; null if unsolvable
    public Iterable&lt;Board&gt; solution()

    // test client (see below) 
    public static void main(String[] args)

}
</code></pre>
<p><em>Implementation requirement</em>. To implement the A* algorithm, you must use the
<a href="https://algs4.cs.princeton.edu/code/javadoc/edu/princeton/cs/algs4/MinPQ.html">MinPQ</a> data type for the priority queue.</p>
<p><em>Corner cases</em>. </p>
<ul>
<li>Throw an IllegalArgumentException in the constructor if the argument is null.</li>
<li>Return -1 in moves() if the board is unsolvable.</li>
<li>Return null in solution() if the board is unsolvable.</li>
</ul>
<p><em>Test client</em>. The following test client takes the name of an input file as a command-line argument and prints the minimum number of moves to solve the puzzle and a corresponding solution.</p>
<pre><code class="language-java">public static void main(String[] args) {

    // create initial board from file
    In in = new In(args[0]);
    int n = in.readInt();
    int[][] tiles = new int[n][n];
    for (int i = 0; i &lt; n; i++)
        for (int j = 0; j &lt; n; j++)
            tiles[i][j] = in.readInt();
    Board initial = new Board(tiles);

    // solve the puzzle
    Solver solver = new Solver(initial);

    // print solution to standard output
    if (!solver.isSolvable())
        StdOut.println(&quot;No solution possible&quot;);
    else {
        StdOut.println(&quot;Minimum number of moves = &quot; + solver.moves());
        for (Board board : solver.solution())
            StdOut.println(board);
    }
}
</code></pre>
<p>The input file contains the board size n, followed by the n-by-n grid of tiles, using 0 to designate the blank square.</p>
<p><img src="https://user-images.githubusercontent.com/161689/118253356-20a42380-b4aa-11eb-801f-8fb8ea590e49.png" alt="image" /></p>
<p><em>Two optimizations</em>. To speed up your solver, implement the following two optimizations:</p>
<ul>
<li><em>The critical optimization</em>. A* search has one annoying feature: search nodes corresponding to the same board are enqueued on the priority queue many times (e.g., the bottom-left search node in the game-tree diagram above). To reduce unnecessary exploration of useless search nodes, when considering the neighbors of a search node, don‚Äôt enqueue a neighbor if its board is the same as the board of the previous search node in the game tree.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/118253437-36194d80-b4aa-11eb-985e-1838209bdde1.png" alt="image" /></p>
<ul>
<li><em>Caching the Hamming and Manhattan priorities.</em>
To avoid recomputing the Manhattan priority of a search node from scratch each time during various priority queue operations, pre-compute its value when you construct the search node; save it in an instance variable; and return the saved value as needed. This caching technique is broadly applicable: consider using it in any situation where you are recomputing the same quantity many times and for which computing that quantity is a bottleneck operation.</li>
</ul>
<p><em>Detecting unsolvable boards</em>. Not all initial boards can lead to the goal board by a sequence of moves, including these two:</p>
<p><img src="https://user-images.githubusercontent.com/161689/118253502-49c4b400-b4aa-11eb-905c-1761f1f0af23.png" alt="image" /></p>
<p>To detect such situations, use the fact that boards are divided into two equivalence classes with respect to reachability:</p>
<ul>
<li>Those that can lead to the goal board</li>
<li>Those that can lead to the goal board if we modify the initial board by swapping any pair of tiles (the blank square is not a tile)</li>
</ul>
<p>(Difficult challenge for the mathematically inclined: prove this fact.) To apply the fact, run the A* algorithm on two puzzle instances‚Äîone with the initial board and one with the initial board modified by swapping a pair of tiles‚Äîin lockstep (alternating back and forth between exploring search nodes in each of the two game trees). Exactly one of the two will lead to the goal board.</p>
<hr />
<h3 id="summary-1"><a class="header" href="#summary-1">Summary</a></h3>
<p>I have some sample solution <a href="https://github.com/liufuyang/algs4/blob/main/algs_princeton/4_a_start_search_pq/Solver.java">here</a> for this exercises. </p>
<p>The most important hints could be:</p>
<ul>
<li>You would need to implement a linked list type of structure to keep all the visited states and link them to the current state so to allow it to be traced back in the end.</li>
<li>For that <em>critical optimizaiton</em> part where making sure we don't insert a visitedstate into the frontier again. I initially tried to put all the visited state in a 
large SET and each time check the common set whether it contains the state before 
inserting but that apparently is not always correct (and it is slow). One only 
need to check all the state in it's state chain to know whether it is a state can be inserted to frontier. Also as we are not dealing some type of circled graphs so
to speed up we only needed to check the state (one of the neighbor) a single time
with current state's previous state.</li>
</ul>
<h1 id="binary-search-tree-bst"><a class="header" href="#binary-search-tree-bst">Binary search tree (BST)</a></h1>
<p>Key-value pair abstraction - Map/Dictionary</p>
<ul>
<li>key -&gt; value</li>
<li>insert</li>
<li>search/get</li>
<li>delete</li>
</ul>
<h2 id="binary-search-tree-bst-1"><a class="header" href="#binary-search-tree-bst-1">Binary search tree (BST)</a></h2>
<ul>
<li>Each node has a key</li>
<li>For every key: 
<ul>
<li>Larger than all keys in its left subtree</li>
<li>Smaller than all keys in its right subtree</li>
</ul>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/118122782-99947400-b3f3-11eb-8cb6-6d8b44431cf9.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118122841-b466e880-b3f3-11eb-937d-8ecf53afb509.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118122888-c3e63180-b3f3-11eb-9265-abe6c318b8e6.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118122925-d496a780-b3f3-11eb-918e-fc6e232de6e8.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118124959-a4043d00-b3f6-11eb-812a-d2e0e7076cd1.png" alt="floor" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118125294-12e19600-b3f7-11eb-8615-fb16fe62ab9e.png" alt="count" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/119228922-9e54d880-bb15-11eb-84b1-0ff4648bc89a.png" alt="size" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118125409-34db1880-b3f7-11eb-8374-c6fefe5a67c9.png" alt="rank" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118123893-27249380-b3f5-11eb-9ff4-4e1bbf08ff02.png" alt="shape" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118124296-aca84380-b3f5-11eb-8501-260df1c7a6c7.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118125483-55a36e00-b3f7-11eb-8fa7-8c3a672b5d4a.png" alt="in order traversal" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118125866-d4001000-b3f7-11eb-9237-0759e7db1ddb.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118126011-ff82fa80-b3f7-11eb-9ccf-907e62157358.png" alt="Summary" /></p>
<p>So with BST the drawback includes:</p>
<ul>
<li>No good guarantee that if insertion has order, the tree will be imbalanced. (The red black tree can help)</li>
<li>when deleting: the order of growth of the expected height of a binary search tree with n keys after a long intermixed sequence of random insertions and random Hibbard deletions is: <code>sqrt(N)</code>. This currently is not optimized to <code>log N</code> and it is an open question.</li>
</ul>
<hr />
<h3 id="notes-on-delete"><a class="header" href="#notes-on-delete">Notes on delete</a></h3>
<p><img src="https://user-images.githubusercontent.com/161689/118127981-9bae0100-b3fa-11eb-8915-0780634e3ba9.png" alt="0 child" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118128059-b3858500-b3fa-11eb-8159-2ecb4068784f.png" alt="1 child" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118128101-c13b0a80-b3fa-11eb-8f90-5288c73a1dd9.png" alt="2 child" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118128303-00695b80-b3fb-11eb-853e-558aaa3c1e92.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118128349-0e1ee100-b3fb-11eb-81c3-8f3ddf449ca4.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118128749-9d2bf900-b3fb-11eb-8881-0e36c1324f31.png" alt="image" /></p>
<h1 id="balanced-search-trees"><a class="header" href="#balanced-search-trees">Balanced Search Trees</a></h1>
<ul>
<li><code>Binary Heap</code> or priority queue is good for <code>max()</code> or <code>min()</code> as it is only O(1),
however it only support <code>delMax/Min()</code> and not good for search.</li>
<li><code>Binary search tree</code> is good for search, rank, insert and delete, also quite good for
finding max and min, all these operation is O(log N), if the tree can be <strong>balanced</strong>.</li>
<li><code>Hash Table</code> is super good for search/look-up (O(1)), insert and delete, but not good for operations
such as rank, min, or max.</li>
</ul>
<h1 id="red-black-bsts"><a class="header" href="#red-black-bsts">Red-Black BSTs</a></h1>
<p><a href="https://d3c33hcgiwev3.cloudfront.net/_806d02702c594a8d442f4e96711a454c_33BalancedSearchTrees.pdf?Expires=1644278400&amp;Signature=a%7Ef3tXIlpYFHCxqV6MFHIrtUJlxzyYLA7lxA%7E02nPxRVxw%7EwbMjYEXMgjbrGe9OfcwCFWV033Qto9qAYGC1nHjJzcniKiR6B%7Etdex8AbwljcxrufwnXHnTFSGQRrPI9Ntykw8JWCbteGKmIZJ3V5TDzMeCtQqOERSYpYEsyfxVQ_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A">Link</a> to course presentations.</p>
<p>BTS - binary search tree is a very good data structure
that has fast insert and search property. One key point
in making a BST to work well for any cases is to keep
the tree balanced, or to keep the height of tree as 
low as possible. This is achieved via algorithms such
as <code>2-3 tree</code> and <code>Red-Black tree</code> (which is a different
representation of 2-3 tree).</p>
<h2 id="2-3-tree"><a class="header" href="#2-3-tree">2-3 tree</a></h2>
<p>Allow 1 or 2 keys per node. </p>
<ul>
<li>2-node: one key, two children.</li>
<li>3-node: two keys, three children.</li>
<li>4-node: a special temporary condition, 4 children, only exist
for a short time while inserting</li>
</ul>
<blockquote>
<p>Guaranteed logarithmic performance for search and insert,
worst case: \(height \leq c log_{2}(n) \)</p>
</blockquote>
<img width="400" src="https://user-images.githubusercontent.com/161689/152679142-1ec460d7-ac7b-40ed-ad2e-99bbffa467b9.png"/>
<p>Insertion into a 3-node at bottom.</p>
<ul>
<li>Add new key to 3-node to create temporary 4-node.</li>
<li>Move middle key in 4-node into parent.</li>
<li>Repeat up the tree, as necessary. </li>
<li>If you reach the root and it's a 4-node, split it into three 2-nodes.</li>
</ul>
<img width="600" src="https://user-images.githubusercontent.com/161689/152679344-db35d723-277d-4082-b920-f42c7cd212cb.png"/>
<h2 id="left-leaning-red-black-bsts-guibas-sedgewick-1979-and-sedgewick-2007"><a class="header" href="#left-leaning-red-black-bsts-guibas-sedgewick-1979-and-sedgewick-2007">Left-leaning red-black BSTs (Guibas-Sedgewick 1979 and Sedgewick 2007)</a></h2>
<p>Idea: ensure that hight always O(log N) (best possible)</p>
<img width="600" src="https://user-images.githubusercontent.com/161689/152679596-37d0522d-a4ef-4fac-80e1-24e521a608de.png"/>
<p>A Red-Black BST that has rules:</p>
<ul>
<li>each node <code>red</code> or <code>black</code></li>
<li>root is always black</li>
<li>no red nodes in a row
<ul>
<li>red node =&gt; only black children</li>
</ul>
</li>
<li>every root-Null path (like in an unsuccessful search) has the same number of black nodes</li>
<li>red links lean left</li>
</ul>
<blockquote>
<blockquote>
<p>Left-leaning red-black BSTs: 1-1 correspondence with 2-3 trees</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>Hight Guarantee: if it is a red-black tree with n nodes,
then it has \(height \leq 2 log_{2}(n + 1) \)</p>
</blockquote>
</blockquote>
<img width="600" src="https://user-images.githubusercontent.com/161689/152679725-09e13abf-7e23-4add-9115-da159026c59d.png"/>
<blockquote>
<blockquote>
<p>Every root to leaf path has the same number of black nodes</p>
</blockquote>
</blockquote>
<iframe width="640" height="360"
src="https://www.youtube.com/embed/YPnFn-LOPLY"
frameborder="0" allow="accelerometer; autoplay; clipboard-write;
encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>Sedgewick's friend wrote him a late night email
telling him in this show they actually got the line
for Red-Black tree correct. 
(And I don't think that helps with the ladies :) )</p>
<details>
  <summary>Click to see scripts...</summary>
  <img width="600" src="https://user-images.githubusercontent.com/161689/152861051-1ca05eb1-17b6-4b12-bc73-1f19949c446a.png" />
</details>
<h2 id="achieved-by-3-basic-operations"><a class="header" href="#achieved-by-3-basic-operations">Achieved by 3 basic operations</a></h2>
<ul>
<li>Left Rotation</li>
<li>Right Rotation</li>
<li>Flip Colors</li>
</ul>
<img width="600" src="https://user-images.githubusercontent.com/161689/152679888-dcb6aa7b-1eaa-412c-8fba-9fe60b2e07ff.png"/>
<img width="600" src="https://user-images.githubusercontent.com/161689/152679920-8546ea77-4396-4e63-ab8f-8dc90110975b.png"/>
<h1 id="b-trees"><a class="header" href="#b-trees">B-Trees</a></h1>
<p><img src="https://user-images.githubusercontent.com/161689/152861534-d9b1fac0-f8fd-4471-9f72-873d6c021107.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/152861575-99f12d24-5c63-4e3f-b080-bcc86e25c6a5.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/152861603-3056652a-2dd7-4a86-adec-9b3b23c7c494.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/152861672-638c0071-2cdc-45c1-9a10-ff5e5aa63df9.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/152861710-4c456c51-0692-4ab4-9b63-da26abd4c5c5.png" alt="image" />
<img src="https://user-images.githubusercontent.com/161689/152861763-4e8bdf02-2a92-44ea-85a8-66bc92312184.png" alt="image" /></p>
<h1 id="kd-trees"><a class="header" href="#kd-trees">Kd-Trees</a></h1>
<p>Geometric application of BSTs</p>
<h2 id="1d-range-search"><a class="header" href="#1d-range-search">1d range search</a></h2>
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154791439-67b937c6-8123-494b-8cb1-f41c222bab9e.png">
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154791500-3dce727e-4471-40db-b6ed-a07be404cfc2.png">
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154791541-c9fe436c-db9d-48b8-8958-fe4c066b4c31.png">
<blockquote>
<p><code>1d range count</code> on BST can be achieved with recursive <code>rank()</code> calls.</p>
</blockquote>
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154791741-396b7ec0-648c-4a45-9849-ab87bc5ada6d.png">
<h2 id="orthogonal-line-segment-intersection---sweep-line-algorithm"><a class="header" href="#orthogonal-line-segment-intersection---sweep-line-algorithm">Orthogonal line segment intersection - sweep line algorithm</a></h2>
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154792006-1eb13426-9ca7-412a-ac39-53587733f532.png">
<img width="550" alt="image" src="https://user-images.githubusercontent.com/161689/154792027-1add23d4-4508-4b11-adfe-05d498f9e721.png">
<img width="548" alt="image" src="https://user-images.githubusercontent.com/161689/154792263-b13ab743-2e02-487e-b004-f088db708dc7.png">
<h2 id="2-d-orthogonal-range-search---kd-trees"><a class="header" href="#2-d-orthogonal-range-search---kd-trees">2-d orthogonal range search - Kd-trees</a></h2>
<h1 id="cache"><a class="header" href="#cache">Cache</a></h1>
<p><a href="https://www.mindmeister.com/map/2232274706?t=KlHKXnFCYG">üß† ¬† MindMap link</a></p>
<ul>
<li>Single Node
<ul>
<li><strong>LRU</strong> - least recently updated cache
<ul>
<li>a map for keep values for search
and delete</li>
<li>a double-linked list as queue to
remove least recently updated
value</li>
</ul>
</li>
</ul>
</li>
<li>Distributed
<ul>
<li>shard
<ul>
<li>so to save more data in total</li>
<li>each shard is on its own server</li>
<li>one shard could be hot, and data
can loss if one shard dies - solved
by replication</li>
</ul>
</li>
<li>replication
<ul>
<li>how to
<ul>
<li>leader, follwer
<ul>
<li>put/get to leader</li>
<li>get to follwers</li>
<li>leader sends data to follwer</li>
</ul>
</li>
<li>leader election methods
<ul>
<li>using configuration service</li>
<li>leader election in a shard group</li>
</ul>
</li>
<li>ruft, strong consistency</li>
<li>gossip, enventual consistency</li>
</ul>
</li>
<li>adding availability</li>
<li>okay to miss some set in corner
cases, cache speed/latency is more
important</li>
<li>scaling out can also help solving
hot shard issue</li>
</ul>
</li>
<li>consistent hashing
<ul>
<li>multiple positions positions on
circle for each nodes</li>
</ul>
</li>
</ul>
</li>
<li>CAP
<ul>
<li>Consistency (not favourd)
<ul>
<li>Get on a replica after a set could
be missed when data is replicating
from leader to replicas async</li>
<li>Cache servers might go down and up</li>
</ul>
</li>
<li>Availabilty (favoured)</li>
</ul>
</li>
<li>Data expiration
<ul>
<li>during client fetch or via client
expire call</li>
<li>active with a vacuum/gc thread
<ul>
<li>when # of keys are too large, use
some probabilistic way to random
check each key instand loop the
key range</li>
</ul>
</li>
</ul>
</li>
<li>Cache client
<ul>
<li>all clients know about all cache servers and
should have the same list of servers
<ul>
<li>Maintaining a list of cache server,
how?
<ul>
<li>Use configuration management
tools (e.g. Puppet) to deploy
modified file to every service host</li>
<li>Use a S3 file to share a config file</li>
<li>Configuration service (e.g.
ZooKeeper, Redis Sentinel) -
discover cache host, monitoring
their health
<ul>
<li>Each cache server connect and
send heart beats</li>
<li>Costly on build and maintain, but
fully automize the list info update</li>
<li>Another benefit</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>client store list of servers in sorted
order by hash value (e.g. TreeMap)</li>
<li>Binary search is used to identify
server (log n)</li>
<li>Use TCP or UDP protocol to talk to servers</li>
<li>If server unavailable, client proceeds as though it was a cache miss</li>
</ul>
</li>
<li>Detailed topics
<ul>
<li>Monitoring and logging
<ul>
<li>Network IO</li>
<li>QPS</li>
<li>Miss rate</li>
</ul>
</li>
<li>security - should only exposed internally</li>
</ul>
</li>
<li>Questions
<ul>
<li>I wonder how do you sync data
into a newly started replica in a
shard group. Simply copy all data
in the leader's memory to the new
replica node? Wouldn't that
consumes quite a lot of the
leader's CPU?</li>
</ul>
</li>
</ul>
<h1 id="rust-note"><a class="header" href="#rust-note">Rust note</a></h1>
<p><img src="https://media.githubusercontent.com/media/usagi/rust-memory-container-cs/master/3840x2160/rust-memory-container-cs-3840x2160-dark-back.png" alt="memory_cheat" /></p>
<h1 id="c-memory-mode"><a class="header" href="#c-memory-mode">C++ memory mode</a></h1>
<ul>
<li>[[Video Link]](https://www.youtube.com/watch?v=OyNG4qiWnmU)</li>
<li>[[Some docs about it]](https://doc.rust-lang.org/nomicon/atomics.html)</li>
</ul>
<h1 id="memory-order"><a class="header" href="#memory-order">Memory order</a></h1>
<ul>
<li>Acquire / Release</li>
<li>Sequentially Consistent (SeqCst)</li>
<li>Relaxed</li>
</ul>
<h2 id="acquire-release"><a class="header" href="#acquire-release">Acquire-Release</a></h2>
<p>Sort of like mutex primitives, aquire=lock, release=unlock. Acquire and Release are largely intended to be paired.</p>
<ul>
<li>
<p><code>release</code> update the memory, &quot;publish&quot; to other threads, used only with <code>store</code> type operation(save/publish data out, cannot use with load)</p>
</li>
<li>
<p><code>acquire</code> memory &quot;published&quot; by other threads, making it available to us, used only with <code>load</code> type of operation (cannot use with store)</p>
</li>
<li>
<p>For &quot;load and store&quot; type of operation:</p>
<ul>
<li><code>release</code> will make load <code>relaxed</code> and store <code>release</code></li>
<li><code>acquire</code> will make load <code>acquire</code> and store <code>relaxed</code></li>
</ul>
</li>
<li>
<p><code>AcqRel</code> or acquire and release also exist, so can be used for &quot;load and store&quot; type of operation, 
making load <code>acquire</code> and store <code>release</code> (no relaxed). 
This operation order could be handy for situation such as for an Arc type of thing in the end to drop
the internal object, it may use some operation like <code>load_and_minors_1_then_store</code> so you would 
use this <code>AcqRel</code> to make sure the thread got the updated value and all other threads has updated value when they read.
This is illustrated in the video.</p>
</li>
</ul>
<p>Intuitively, an acquire access ensures that every access after it stays after it. However operations that occur before an acquire are free to be reordered to occur after it. Similarly, a release access ensures that every access before it stays before it. However operations that occur after a release are free to be reordered to occur before it.</p>
<p>When thread A releases a location in memory and then thread B subsequently acquires the same location in memory, causality is established. <strong>Every write (including non-atomic and relaxed atomic writes) that happened before A's release will be observed by B after its acquisition.</strong> However no causality is established with any other threads. Similarly, no causality is established if A and B access different locations in memory.</p>
<p>Or using the words from the video:</p>
<ul>
<li>acquire/release: no total order of events</li>
<li>each thread has it view of consistent ordering</li>
</ul>
<p>Basic use of release-acquire is therefore simple: you acquire a location of memory to begin the critical section, and then release that location to end it. For instance, a simple spinlock might look like:</p>
<pre><pre class="playground"><code class="language-rust">use std::sync::Arc;
use std::sync::atomic::{AtomicBool, Ordering};
use std::thread;

fn main() {
    let lock = Arc::new(AtomicBool::new(false)); // value answers &quot;am I locked?&quot;

    // ... distribute lock to threads somehow ...

    // Try to acquire the lock by setting it to true
    while lock.compare_and_swap(false, true, Ordering::Acquire) {
        // c++ code here could be: std::this_threadd::yield() to let other thread run
     }
    // broke out of the loop, so we successfully acquired the lock!

    // ... scary data accesses, but safe to do stuff here ...

    // ok we're done, release the lock
    lock.store(false, Ordering::Release);
}
</code></pre></pre>
<h2 id="sequentially-consistent"><a class="header" href="#sequentially-consistent">Sequentially Consistent</a></h2>
<p>Be cause there is no total order of events for acquire/release, Sequentially Consistent is 
introduced.</p>
<p>Sequentially Consistent is the most powerful of all, implying the restrictions of all other orderings. Intuitively, a sequentially consistent operation cannot be reordered: all accesses on one thread that happen before and after a SeqCst access stay before and after it. A data-race-free program that uses only sequentially consistent atomics and data accesses has the very nice property that there is a single global execution of the program's instructions that all threads agree on. This execution is also particularly nice to reason about: it's just an interleaving of each thread's individual executions. This does not hold if you start using the weaker atomic orderings.</p>
<p>The relative developer-friendliness of sequential consistency doesn't come for free. Even on strongly-ordered platforms sequential consistency involves emitting memory fences.</p>
<p>In practice, sequential consistency is rarely necessary for program correctness. However sequential consistency is definitely the right choice if you're not confident about the other memory orders. Having your program run a bit slower than it needs to is certainly better than it running incorrectly! It's also mechanically trivial to downgrade atomic operations to have a weaker consistency later on. Just change <code>SeqCst</code> to <code>Relaxed</code> and you're done! Of course, proving that this transformation is correct is a whole other matter.</p>
<h2 id="relaxed"><a class="header" href="#relaxed">Relaxed</a></h2>
<p>Relaxed accesses are the absolute weakest. They can be freely re-ordered and provide no happens-before relationship. Still, relaxed operations are still atomic. That is, they don't count as data accesses and any read-modify-write operations done to them occur atomically. Relaxed operations are appropriate for things that you definitely want to happen, but don't particularly otherwise care about. For instance, incrementing a counter can be safely done by multiple threads using a relaxed <code>fetch_add</code> if you're not using the counter to synchronize any other accesses.</p>
<p>There's rarely a benefit in making an operation relaxed on strongly-ordered platforms, since they usually provide release-acquire semantics anyway. However relaxed operations can be cheaper on weakly-ordered platforms.</p>
<h1 id="pattern-matching"><a class="header" href="#pattern-matching">Pattern matching</a></h1>
<p>Patterns come in two forms: refutable and irrefutable. 
Patterns that will match for any possible value passed are <em>irrefutable</em>. An example would be x in the statement <code>let x = 5;</code> because <code>x</code> matches anything and therefore cannot fail to match. 
(Meaning it always will have a match.)</p>
<p>Patterns that can fail to match for some possible value are <em>refutable</em>. An example would be <code>Some(x)</code> in the expression <code>if let Some(x) = a_value</code> because if the value in the <code>a_value</code> variable is <code>None</code> rather than <code>Some</code>, the <code>Some(x)</code> pattern will not match.</p>
<h2 id="pattern-matching-type"><a class="header" href="#pattern-matching-type">Pattern matching type</a></h2>
<ul>
<li><code>let</code> - only irrefutable</li>
<li>fn param, closure - only irrefutable</li>
<li><code>match</code> exp - accept refutable and irrefutable</li>
<li><code>if let</code> exp - accept refutable and irrefutable</li>
<li><code>while let</code> exp - accept refutable and irrefutable</li>
<li><code>for</code> exp - only irrefutable</li>
</ul>
<h2 id="let"><a class="header" href="#let">let</a></h2>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Point {x: isize, y: isize};
let (a, b) = (1, 2);
let Point {x, y} = Point {x:3, y:4};
assert_eq!(3, x);
assert_eq!(4, y);
<span class="boring">}
</span></code></pre></pre>
<h2 id="no-need-to-write-ref"><a class="header" href="#no-need-to-write-ref">No need to write <code>ref</code>?</a></h2>
<p>Compiler helps you adding <code>ref</code> when matching references with
non-references like expressions.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x: Option&lt;String&gt; = Some(&quot;hello&quot;.into());
match &amp;x {
    Some(s) =&gt; println!(&quot;{}&quot;, s), // nothing moves here, `s` is a &amp;String,
                                  // the same as `Some(ref s) =&gt; ...`, with `ref` added by compiler behind the scene
    None =&gt; println!(&quot;nothing&quot;)
}
println!(&quot;{}&quot;, x.unwrap());       // x still owns the String 
<span class="boring">}
</span></code></pre></pre>
<h1 id="smart-pointers"><a class="header" href="#smart-pointers">Smart pointers</a></h1>
<p>Smart pointers allow you to store data on the heap rather than the stack. What remains on the stack is the pointer to the heap data.</p>
<ul>
<li><code>Box&lt;T&gt;</code> for allocating values on the heap</li>
<li><code>Rc&lt;T&gt;</code>, a reference counting type that enables multiple ownership</li>
<li><code>Ref&lt;T&gt;</code> and <code>RefMut&lt;T&gt;</code>, accessed through <code>RefCell&lt;T&gt;</code>, a type that enforces the borrowing rules at runtime instead of compile time</li>
</ul>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s_on_stack: Box&lt;&amp;str&gt; = Box::new(&quot;hello&quot;); // string is still on stack
let s_on_heap: Box&lt;str&gt; = Box::from(&quot;hello&quot;); // string is copied onto heap
println!(&quot;s_on_stack = {}&quot;, s_on_stack);
println!(&quot;s_on_heap = {}&quot;, s_on_heap);
<span class="boring">}
</span></code></pre></pre>
<h2 id="using-deref-trait-to-auto-dereference"><a class="header" href="#using-deref-trait-to-auto-dereference">Using <code>Deref</code> trait to auto dereference</a></h2>
<pre><pre class="playground"><code class="language-rust">use std::ops::Deref;

struct MySmartPointer&lt;T&gt;{hold: T}

impl&lt;T&gt; MySmartPointer&lt;T&gt; {
    fn new(hold: T) -&gt; MySmartPointer&lt;T&gt; {
        MySmartPointer{hold}
    }
}

impl&lt;T&gt; Deref for MySmartPointer&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;T {
        &amp;self.hold
    }
}

// using it
struct User {
    name: &amp;'static str
}

impl User {
    fn print_name(&amp;self) {
        println!(&quot;My name is {}&quot;, self.name);
    }
}

fn main() {
    let user_pointer = MySmartPointer::new(User {name: &quot;Alex&quot;});
    user_pointer.print_name(); // auto deref
}
</code></pre></pre>
<h2 id="using-box-for-unknown-size-type"><a class="header" href="#using-box-for-unknown-size-type">Using <code>Box</code> for unknown size type</a></h2>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
enum List {
    Cons(i32, List),
    Nil,
}

use crate::List::{Cons, Nil};

fn main() {
    let list = Cons(1, Cons(2, Cons(3, Nil)));
    println!(&quot;{:?}&quot;, list);
    // recursive type has infinite size, won't compile
}
</code></pre></pre>
<p>Above code won't compile as Rust cannot know the size of a <code>List</code> as it is recursive. Now we can use <code>Box&lt;&gt;</code> to make it's size known at compile time.</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
enum List {
    Cons(i32, Box&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};

fn main() {
    let list = Cons(1,
        Box::new(Cons(2,
            Box::new(Cons(3,
                Box::new(Nil))))));
    println!(&quot;{:?}&quot;, list);
}
</code></pre></pre>
<h1 id="string"><a class="header" href="#string">String</a></h1>
<h2 id="char"><a class="header" href="#char">char</a></h2>
<p>Actually a <code>4-byte fixed size</code> or <code>u32</code> type of value.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let tao: char = 'ÈÅì';
println!(&quot;'ÈÅì' as u32: {}&quot;, tao as u32); // 36947 char is basically u32 size unicode
println!(&quot;U+{:x}&quot;, tao as u32);  // U+9053 - output in 0x or hexadecimal(16) format
println!(&quot;{}&quot;, tao.escape_unicode()); // \u{9053}
println!(&quot;{}&quot;, char::from(65)); // from a u8 -&gt; 'A'
println!(&quot;{}&quot;, std::char::from_u32(0x9053).unwrap()); // from a u32
println!(&quot;{}&quot;, std::char::from_u32(36947).unwrap()); // from a u32
println!(&quot;{}&quot;, std::char::from_u32(1234567).unwrap_or('_')); // not every u32 is a char

// noticing a char uses 4-byte in memory but not all the space is always used
assert_eq!(3, tao.len_utf8()); // effective data length in byte
assert_eq!(4, std::mem::size_of_val(&amp;tao));
<span class="boring">}
</span></code></pre></pre>
<h2 id="string-1"><a class="header" href="#string-1">String</a></h2>
<p><code>String</code> is basically a <code>Vec&lt;u8&gt;</code>.</p>
<p>Other type:</p>
<ul>
<li><code>Cstr/Cstring</code></li>
<li><code>OsStr/OsString</code></li>
<li><code>Path/PathBuf</code></li>
</ul>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let tao = std::str::from_utf8(&amp;[0xe9u8, 0x81u8, 0x93u8]).unwrap();
println!(&quot;{}&quot;, tao);

let tao = String::from(&quot;\u{9053}&quot;);
println!(&quot;{}&quot;, tao);
<span class="boring">}
</span></code></pre></pre>
<h3 id="a-char-like-string-might-not-be-a-char"><a class="header" href="#a-char-like-string-might-not-be-a-char">A char like String might not be a char</a></h3>
<p>A single &quot;char&quot; looking thing - like ‚ù§Ô∏è - doesn't means it is a valid char. Some of those single looking characters needs more than 
one <code>char</code> or <code>code points</code> to be represented:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(6, String::from(&quot;‚ù§Ô∏è&quot;).len()); // length in byte
assert_eq!(6, std::mem::size_of_val(String::from(&quot;‚ù§Ô∏è&quot;).as_str())); // same calculation as above
assert_eq!(2, String::from(&quot;‚ù§Ô∏è&quot;).chars().count()); // how many `code points` - is 2?
// as ‚ù§Ô∏è takes 2 code points , we can't assign it to a char
// let heart = '‚ù§Ô∏è'; // This won't work

assert_eq!(1, String::from(&quot;ÈÅì&quot;).chars().count()); // ÈÅì can be defined as a char as it only has 1 code point
assert_eq!('ÈÅì', String::from(&quot;ÈÅì&quot;).chars().next().unwrap());
assert_eq!(3, String::from(&quot;ÈÅì&quot;).len());
assert_eq!(3, std::mem::size_of_val(String::from(&quot;ÈÅì&quot;).as_str()));
<span class="boring">}
</span></code></pre></pre>
<h3 id="√©-is-not-e"><a class="header" href="#√©-is-not-e">'√©' is not 'eÃÅ'</a></h3>
<p>As always, remember that a human intuition for 'character' may not map to Unicode's definitions. For example, despite looking similar, the '√©' character is one Unicode code point while 'eÃÅ' is two Unicode code points:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(1, String::from(&quot;√©&quot;).chars().count()); // '\u{00e9}' -&gt; latin small letter e with acute
assert_eq!(2, String::from(&quot;eÃÅ&quot;).chars().count()); // '\u{0065}' + '\u{0301}' -&gt; U+0065: 'latin small letter e', U+0301: 'combining acute accent'
// They look the same in editor but have different code points ?!
<span class="boring">}
</span></code></pre></pre>
<h1 id="note-for-tokio-dev"><a class="header" href="#note-for-tokio-dev">Note for tokio dev</a></h1>
<p>Frequently used command:</p>
<pre><code># Run a single integration test
cargo test --test tcp_into_std

# Run a single doc test
cargo test --doc net::tcp::stream::TcpStream::into_std

# Format code
rustfmt --edition 2018 $(find . -name '*.rs' -print)
</code></pre>
<h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<h2 id="good-posts-and-links"><a class="header" href="#good-posts-and-links">Good posts and links</a></h2>
<ul>
<li><a href="https://limpet.net/mbrubeck/2019/02/07/rust-a-unique-perspective.html">Rust: A unique perspective - Matt Brubeck</a></li>
<li><a href="https://manishearth.github.io/blog/2018/01/10/whats-tokio-and-async-io-all-about/">What Are Tokio and Async IO All About? - Manish Goregaokar</a></li>
<li><a href="https://ryhl.io/blog/async-what-is-blocking/">Async: What is blocking? - Alice Ryhl</a></li>
</ul>
<h1 id="network-programming"><a class="header" href="#network-programming">Network Programming</a></h1>
<p>http://beej.us/guide/bgnet/html/</p>
<h2 id="two-types-of-internet-sockets"><a class="header" href="#two-types-of-internet-sockets">Two Types of Internet Sockets</a></h2>
<ul>
<li><code>SOCK_STREAM</code> -&gt; TCP</li>
<li><code>SOCK_DGRAM</code>-&gt; UDP, may lost, may out of order, but fast</li>
</ul>
<h4 id="layered-network-model-data-encapsulation"><a class="header" href="#layered-network-model-data-encapsulation">Layered Network Model (Data Encapsulation)</a></h4>
<ul>
<li>Application Layer (telnet, ftp, etc.)</li>
<li>Host-to-Host Transport Layer (TCP, UDP) - port number (16-bit number)</li>
<li>Internet Layer (IP and routing)</li>
<li>Network Access Layer (Ethernet, wi-fi, or whatever)</li>
</ul>
<p>See how much work there is in building a simple packet? All you have to do for stream sockets is <code>send()</code> the data out.
All you have to do for <code>datagram sockets</code> is encapsulate the packet in the method of your choosing and <code>sendto()</code> it out. The kernel builds the Transport Layer and Internet Layer on for you and the hardware does the Network Access Layer. Ah, modern technology.</p>
<h3 id="system-calls"><a class="header" href="#system-calls">System calls</a></h3>
<h4 id="bind---what-port-am-i-on"><a class="header" href="#bind---what-port-am-i-on"><code>bind()</code> - What port am I on?</a></h4>
<pre><code class="language-c">struct addrinfo hints, *res;
int sockfd;

// first, load up address structs with getaddrinfo():
memset(&amp;hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;  // use IPv4 or IPv6, whichever
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

getaddrinfo(NULL, &quot;3490&quot;, &amp;hints, &amp;res);

// make a socket:
sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);

// bind it to the port we passed in to getaddrinfo():
bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);
</code></pre>
<h4 id="connect---hey-you"><a class="header" href="#connect---hey-you"><code>connect()</code> - Hey, you!</a></h4>
<pre><code class="language-c">struct addrinfo hints, *res;
int sockfd;

// first, load up address structs with getaddrinfo():

memset(&amp;hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;

getaddrinfo(&quot;www.example.com&quot;, &quot;3490&quot;, &amp;hints, &amp;res);

// make a socket:
sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);

// connect!
connect(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);
</code></pre>
<p>Also, notice that we didn‚Äôt call <code>bind()</code>. Basically, we don‚Äôt care about our local port number; we only care where we‚Äôre going (the remote port). <strong>The kernel will choose a local port for us</strong>, and the site we connect to will automatically get this information from us. No worries.</p>
<h4 id="listen---keep-on-answering-stuff"><a class="header" href="#listen---keep-on-answering-stuff"><code>listen()</code> - Keep on answering stuff</a></h4>
<pre><code class="language-c">int listen(int sockfd, int backlog);
</code></pre>
<p><code>sockfd</code> is the usual socket file descriptor from the <code>socket()</code> system call. <code>backlog</code> is the number of connections allowed on the incoming queue. What does that mean? Well, incoming connections are going to wait in this queue until you <code>accept()</code> them and this is the limit on how many can queue up. Most systems silently limit this number to about 20; you can probably get away with setting it to 5 or 10.</p>
<p>Well, as you can probably imagine, we need to call <code>bind()</code> before we call <code>listen()</code> so that the server is running on a specific port.</p>
<h4 id="accept---thank-you-for-calling-port-3490"><a class="header" href="#accept---thank-you-for-calling-port-3490"><code>accept()</code> - &quot;Thank you for calling port 3490.&quot;</a></h4>
<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;

int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); 
</code></pre>
<p>You call <code>accept()</code> and you tell it to get the pending connection. It‚Äôll return to you a brand new socket file descriptor to use for this single connection! That‚Äôs right, suddenly you have two socket file descriptors for the price of one! The original one is still listening for more new connections, and the newly created one is finally ready to <code>send()</code> and <code>recv()</code></p>
<h4 id="send-and-recv---talk-to-me-baby"><a class="header" href="#send-and-recv---talk-to-me-baby"><code>send()</code> and <code>recv()</code> - Talk to me, baby!</a></h4>
<p>For UDP - <code>sendto()</code> and <code>recvfrom()</code>.</p>
<pre><code class="language-c">int send(int sockfd, const void *msg, int len, int flags); 
</code></pre>
<p>Example:</p>
<pre><code class="language-c">char *msg = &quot;Beej was here!&quot;;
int len, bytes_sent;
.
.
len = strlen(msg);
bytes_sent = send(sockfd, msg, len, 0);
.
.
</code></pre>
<p>Remember, if the value returned by <code>send()</code> doesn‚Äôt match the value in <code>len</code>, it‚Äôs up to you to send the rest of the string. The good news is this: if the packet is small (less than 1K or so) it will probably manage to send the whole thing all in one go.</p>
<p>The <code>recv()</code> call is similar in many respects:</p>
<pre><code class="language-c">int recv(int sockfd, void *buf, int len, int flags);
</code></pre>
<p><code>recv()</code> returns the number of bytes actually read into the buffer, or -1 on error (with <code>errno</code> set, accordingly).</p>
<p>Wait! <code>recv()</code> can return <code>0</code>. This can mean only one thing: the remote side has closed the connection on you! A return value of <code>0</code> is <code>recv()</code>‚Äôs way of letting you know this has occurred.</p>
<pre><code class="language-c">int sendto(int sockfd, const void *msg, int len, unsigned int flags, const struct sockaddr *to, socklen_t tolen);
int recvfrom(int sockfd, void *buf, int len, unsigned int flags,struct sockaddr *from, int *fromlen); 
</code></pre>
<h3 id="close-and-shutdown-get-outta-my-face"><a class="header" href="#close-and-shutdown-get-outta-my-face"><code>close()</code> and <code>shutdown()</code> ‚ÄîGet outta my face!</a></h3>
<h3 id="examples"><a class="header" href="#examples">Examples!!!</a></h3>
<pre><code class="language-c">/*
** server.c -- a stream socket server demo
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;netdb.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;sys/wait.h&gt;
#include &lt;signal.h&gt;

#define PORT &quot;3490&quot;  // the port users will be connecting to

#define BACKLOG 10   // how many pending connections queue will hold

void sigchld_handler(int s)
{
    // waitpid() might overwrite errno, so we save and restore it:
    int saved_errno = errno;

    while(waitpid(-1, NULL, WNOHANG) &gt; 0);

    errno = saved_errno;
}


// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa-&gt;sa_family == AF_INET) {
        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);
    }

    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);
}

int main(void)
{
    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd
    struct addrinfo hints, *servinfo, *p;
    struct sockaddr_storage their_addr; // connector's address information
    socklen_t sin_size;
    struct sigaction sa;
    int yes=1;
    char s[INET6_ADDRSTRLEN];
    int rv;

    memset(&amp;hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;servinfo)) != 0) {
        fprintf(stderr, &quot;getaddrinfo: %s\n&quot;, gai_strerror(rv));
        return 1;
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {
        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,
                p-&gt;ai_protocol)) == -1) {
            perror(&quot;server: socket&quot;);
            continue;
        }

        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;yes,
                sizeof(int)) == -1) {
            perror(&quot;setsockopt&quot;);
            exit(1);
        }

        if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {
            close(sockfd);
            perror(&quot;server: bind&quot;);
            continue;
        }

        break;
    }

    freeaddrinfo(servinfo); // all done with this structure

    if (p == NULL)  {
        fprintf(stderr, &quot;server: failed to bind\n&quot;);
        exit(1);
    }

    if (listen(sockfd, BACKLOG) == -1) {
        perror(&quot;listen&quot;);
        exit(1);
    }

    sa.sa_handler = sigchld_handler; // reap all dead processes
    sigemptyset(&amp;sa.sa_mask);
    sa.sa_flags = SA_RESTART;
    if (sigaction(SIGCHLD, &amp;sa, NULL) == -1) {
        perror(&quot;sigaction&quot;);
        exit(1);
    }

    printf(&quot;server: waiting for connections...\n&quot;);

    while(1) {  // main accept() loop
        sin_size = sizeof their_addr;
        new_fd = accept(sockfd, (struct sockaddr *)&amp;their_addr, &amp;sin_size);
        if (new_fd == -1) {
            perror(&quot;accept&quot;);
            continue;
        }

        inet_ntop(their_addr.ss_family,
            get_in_addr((struct sockaddr *)&amp;their_addr),
            s, sizeof s);
        printf(&quot;server: got connection from %s\n&quot;, s);

        if (!fork()) { // this is the child process
            close(sockfd); // child doesn't need the listener
            if (send(new_fd, &quot;Hello, world!&quot;, 13, 0) == -1)
                perror(&quot;send&quot;);
            close(new_fd);
            exit(0);
        }
        close(new_fd);  // parent doesn't need this
    }

    return 0;
}
</code></pre>
<pre><code class="language-c">/*
** client.c -- a stream socket client demo
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
#include &lt;netdb.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;sys/socket.h&gt;

#include &lt;arpa/inet.h&gt;

#define PORT &quot;3490&quot; // the port client will be connecting to 

#define MAXDATASIZE 100 // max number of bytes we can get at once 

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa-&gt;sa_family == AF_INET) {
        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);
    }

    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);
}

int main(int argc, char *argv[])
{
    int sockfd, numbytes;  
    char buf[MAXDATASIZE];
    struct addrinfo hints, *servinfo, *p;
    int rv;
    char s[INET6_ADDRSTRLEN];

    if (argc != 2) {
        fprintf(stderr,&quot;usage: client hostname\n&quot;);
        exit(1);
    }

    memset(&amp;hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    if ((rv = getaddrinfo(argv[1], PORT, &amp;hints, &amp;servinfo)) != 0) {
        fprintf(stderr, &quot;getaddrinfo: %s\n&quot;, gai_strerror(rv));
        return 1;
    }

    // loop through all the results and connect to the first we can
    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {
        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,
                p-&gt;ai_protocol)) == -1) {
            perror(&quot;client: socket&quot;);
            continue;
        }

        if (connect(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {
            close(sockfd);
            perror(&quot;client: connect&quot;);
            continue;
        }

        break;
    }

    if (p == NULL) {
        fprintf(stderr, &quot;client: failed to connect\n&quot;);
        return 2;
    }

    inet_ntop(p-&gt;ai_family, get_in_addr((struct sockaddr *)p-&gt;ai_addr),
            s, sizeof s);
    printf(&quot;client: connecting to %s\n&quot;, s);

    freeaddrinfo(servinfo); // all done with this structure

    if ((numbytes = recv(sockfd, buf, MAXDATASIZE-1, 0)) == -1) {
        perror(&quot;recv&quot;);
        exit(1);
    }

    buf[numbytes] = '\0';

    printf(&quot;client: received '%s'\n&quot;,buf);

    close(sockfd);

    return 0;
}
</code></pre>
<h3 id="blocking"><a class="header" href="#blocking">Blocking</a></h3>
<p>Lots of functions block. <code>accept()</code> blocks. All the <code>recv()</code> functions block. The reason they can do this is because they‚Äôre allowed to. When you first create the socket descriptor with <code>socket()</code>, the kernel sets it to blocking. If you don‚Äôt want a socket to be blocking, you have to make a call to <code>fcntl()</code>:</p>
<pre><code class="language-c">#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
.
.
sockfd = socket(PF_INET, SOCK_STREAM, 0);
fcntl(sockfd, F_SETFL, O_NONBLOCK);
.
.
</code></pre>
<p>By setting a socket to non-blocking, you can effectively <code>‚Äúpoll‚Äù</code> the socket for information. If you try to read from a non-blocking socket and there‚Äôs no data there, it‚Äôs not allowed to block ‚Äî it will return <code>-1</code> and errno will be set to <code>EAGAIN</code> or <code>EWOULDBLOCK</code>.</p>
<p>(Wait‚Äîit can return <code>EAGAIN</code> or <code>EWOULDBLOCK</code>? Which do you check for? The specification doesn‚Äôt actually specify which your system will return, so for portability, check them both.)</p>
<p>Generally speaking, however, this type of polling is a bad idea. If you put your program in a busy-wait looking for data on the socket, you‚Äôll suck up CPU time like it was going out of style. A more elegant solution for checking to see if there‚Äôs data waiting to be read comes in the following section on <code>poll()</code>.</p>
<h3 id="poll--synchronous-io-multiplexing"><a class="header" href="#poll--synchronous-io-multiplexing"><code>poll()</code> ‚Äî Synchronous I/O Multiplexing</a></h3>
<p>What you really want to be able to do is somehow monitor a bunch of sockets at once and then handle the ones that have data ready. This way you don‚Äôt have to continously poll all those sockets to see which are ready to read.</p>
<p>So how can you avoid polling? Not slightly ironically, you can avoid polling by using the <code>poll()</code> system call. In a nutshell, we‚Äôre going to ask the operating system to do all the dirty work for us, and just let us know when some data is ready to read on which sockets. In the meantime, our process can go to sleep, saving system resources.</p>
<p>The general gameplan is to keep an array of struct <code>pollfds</code> with information about which socket descriptors we want to monitor, and what kind of events we want to monitor for. The OS will block on the <code>poll()</code> call until one of those events occurs (e.g. ‚Äúsocket ready to read!‚Äù) or until a user-specified timeout occurs.</p>
<p>Usefully, a <code>listen()</code>ing socket will return ‚Äúready to read‚Äù when a new incoming connection is ready to be <code>accept()</code>ed.</p>
<p>That‚Äôs enough banter. How do we use this?</p>
<pre><code class="language-c">#include &lt;poll.h&gt;
    
int poll(struct pollfd fds[], nfds_t nfds, int timeout);
</code></pre>
<p><code>fds</code> is our array of information (which sockets to monitor for what), <code>nfds</code> is the count of elements in the array, and <code>timeout</code> is a timeout in milliseconds. It returns the number of elements in the array that have had an event occur.</p>
<p>Let‚Äôs have a look at that struct:</p>
<pre><code class="language-c">struct pollfd {
    int fd;         // the socket descriptor
    short events;   // bitmap of events we're interested in
    short revents;  // when poll() returns, bitmap of events that occurred
};
</code></pre>
<p>So we‚Äôre going to have an array of those, and we‚Äôll see the <code>fd</code> field for each element to a socket descriptor we‚Äôre interested in monitoring. And then we‚Äôll set the events field to indicate the type of <code>events</code> we‚Äôre interested in.</p>
<p>The <code>events</code> field is the bitwise-OR of the following:</p>
<table><thead><tr><th>Macro</th><th>Description</th></tr></thead><tbody>
<tr><td><code>POLLIN</code></td><td>Alert me when data is ready to <code>recv()</code> on this socket.</td></tr>
<tr><td><code>POLLOUT</code></td><td>Alert me when I can <code>send()</code> data to this socket without blocking.</td></tr>
</tbody></table>
<p>Once you have your array of <code>struct pollfds</code> in order, then you can pass it to <code>poll()</code>, also passing the size of the array, as well as a timeout value in milliseconds. (You can specify a negative timeout to wait forever.)</p>
<p>After <code>poll()</code> returns, you can check the revents field to see if <code>POLLIN</code> or <code>POLLOUT</code> is set, indicating that event occurred.</p>
<p>(There‚Äôs actually more that you can do with the <code>poll()</code> call. See the <code>poll()</code> man page, below, for more details.)</p>
<p>Here‚Äôs an example28 where we‚Äôll wait 2.5 seconds for data to be ready to read from standard input, i.e. when you hit <code>RETURN</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;poll.h&gt;

int main(void)
{
    struct pollfd pfds[1]; // More if you want to monitor more

    pfds[0].fd = 0;          // Standard input
    pfds[0].events = POLLIN; // Tell me when ready to read

    // If you needed to monitor other things, as well:
    //pfds[1].fd = some_socket; // Some socket descriptor
    //pfds[1].events = POLLIN;  // Tell me when ready to read

    printf(&quot;Hit RETURN or wait 2.5 seconds for timeout\n&quot;);

    int num_events = poll(pfds, 1, 2500); // 2.5 second timeout

    if (num_events == 0) {
        printf(&quot;Poll timed out!\n&quot;);
    } else {
        int pollin_happened = pfds[0].revents &amp; POLLIN;

        if (pollin_happened) {
            printf(&quot;File descriptor %d is ready to read\n&quot;, pfds[0].fd);
        } else {
            printf(&quot;Unexpected event occurred: %d\n&quot;, pfds[0].revents);
        }
    }

    return 0;
}
</code></pre>
<p>Notice again that <code>poll()</code> returns the number of elements in the <code>pfds</code> array for which events have occurred. It doesn‚Äôt tell you which elements in the array (you still have to scan for that), but it does tell you how many entries have a non-zero <code>revents</code> field (so you can stop scanning after you find that many).</p>
<p>How can we put it all together into a chat server that you can <code>telnet</code>/<code>nc</code> to?</p>
<p>What we‚Äôll do is start a listener socket, and add it to the set of file descriptors to <code>poll()</code>. (It will show ready-to-read when there‚Äôs an incoming connection.)</p>
<p>Then we‚Äôll add new connections to our struct <code>pollfd</code> array. And we‚Äôll grow it dynamically if we run out of space.</p>
<p>When a connection is closed, we‚Äôll remove it from the array.</p>
<p>And when a connection is ready-to-read, we‚Äôll read the data from it and send that data to all the other connections so they can see what the other users typed.</p>
<p>So give this poll server a try. Run it in one window, then <code>telnet localhost 9034</code> from a number of other terminal windows. You should be able to see what you type in one window in the other ones (after you hit RETURN).</p>
<p>Not only that, but if you hit <code>CTRL-]</code> and type <code>quit</code> to exit telnet, the server should detect the disconnection and remove you from the array of file descriptors.</p>
<pre><code class="language-c">/*
** pollserver.c -- a cheezy multiperson chat server
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;netdb.h&gt;
#include &lt;poll.h&gt;

#define PORT &quot;9034&quot;   // Port we're listening on

// Get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa-&gt;sa_family == AF_INET) {
        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);
    }

    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);
}

// Return a listening socket
int get_listener_socket(void)
{
    int listener;     // Listening socket descriptor
    int yes=1;        // For setsockopt() SO_REUSEADDR, below
    int rv;

    struct addrinfo hints, *ai, *p;

    // Get us a socket and bind it
    memset(&amp;hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;
    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;ai)) != 0) {
        fprintf(stderr, &quot;selectserver: %s\n&quot;, gai_strerror(rv));
        exit(1);
    }
    
    for(p = ai; p != NULL; p = p-&gt;ai_next) {
        listener = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol);
        if (listener &lt; 0) { 
            continue;
        }
        
        // Lose the pesky &quot;address already in use&quot; error message
        setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int));

        if (bind(listener, p-&gt;ai_addr, p-&gt;ai_addrlen) &lt; 0) {
            close(listener);
            continue;
        }

        break;
    }

    freeaddrinfo(ai); // All done with this

    // If we got here, it means we didn't get bound
    if (p == NULL) {
        return -1;
    }

    // Listen
    if (listen(listener, 10) == -1) {
        return -1;
    }

    return listener;
}

// Add a new file descriptor to the set
void add_to_pfds(struct pollfd *pfds[], int newfd, int *fd_count, int *fd_size)
{
    // If we don't have room, add more space in the pfds array
    if (*fd_count == *fd_size) {
        *fd_size *= 2; // Double it

        *pfds = realloc(*pfds, sizeof(**pfds) * (*fd_size));
    }

    (*pfds)[*fd_count].fd = newfd;
    (*pfds)[*fd_count].events = POLLIN; // Check ready-to-read

    (*fd_count)++;
}

// Remove an index from the set
void del_from_pfds(struct pollfd pfds[], int i, int *fd_count)
{
    // Copy the one from the end over this one
    pfds[i] = pfds[*fd_count-1];

    (*fd_count)--;
}

// Main
int main(void)
{
    int listener;     // Listening socket descriptor

    int newfd;        // Newly accept()ed socket descriptor
    struct sockaddr_storage remoteaddr; // Client address
    socklen_t addrlen;

    char buf[256];    // Buffer for client data

    char remoteIP[INET6_ADDRSTRLEN];

    // Start off with room for 5 connections
    // (We'll realloc as necessary)
    int fd_count = 0;
    int fd_size = 5;
    struct pollfd *pfds = malloc(sizeof *pfds * fd_size);

    // Set up and get a listening socket
    listener = get_listener_socket();

    if (listener == -1) {
        fprintf(stderr, &quot;error getting listening socket\n&quot;);
        exit(1);
    }

    // Add the listener to set
    pfds[0].fd = listener;
    pfds[0].events = POLLIN; // Report ready to read on incoming connection

    fd_count = 1; // For the listener

    // Main loop
    for(;;) {
        int poll_count = poll(pfds, fd_count, -1);

        if (poll_count == -1) {
            perror(&quot;poll&quot;);
            exit(1);
        }

        // Run through the existing connections looking for data to read
        for(int i = 0; i &lt; fd_count; i++) {

            // Check if someone's ready to read
            if (pfds[i].revents &amp; POLLIN) { // We got one!!

                if (pfds[i].fd == listener) {
                    // If listener is ready to read, handle new connection

                    addrlen = sizeof remoteaddr;
                    newfd = accept(listener,
                        (struct sockaddr *)&amp;remoteaddr,
                        &amp;addrlen);

                    if (newfd == -1) {
                        perror(&quot;accept&quot;);
                    } else {
                        add_to_pfds(&amp;pfds, newfd, &amp;fd_count, &amp;fd_size);

                        printf(&quot;pollserver: new connection from %s on &quot;
                            &quot;socket %d\n&quot;,
                            inet_ntop(remoteaddr.ss_family,
                                get_in_addr((struct sockaddr*)&amp;remoteaddr),
                                remoteIP, INET6_ADDRSTRLEN),
                            newfd);
                    }
                } else {
                    // If not the listener, we're just a regular client
                    int nbytes = recv(pfds[i].fd, buf, sizeof buf, 0);

                    int sender_fd = pfds[i].fd;

                    if (nbytes &lt;= 0) {
                        // Got error or connection closed by client
                        if (nbytes == 0) {
                            // Connection closed
                            printf(&quot;pollserver: socket %d hung up\n&quot;, sender_fd);
                        } else {
                            perror(&quot;recv&quot;);
                        }

                        close(pfds[i].fd); // Bye!

                        del_from_pfds(pfds, i, &amp;fd_count);

                    } else {
                        // We got some good data from a client

                        for(int j = 0; j &lt; fd_count; j++) {
                            // Send to everyone!
                            int dest_fd = pfds[j].fd;

                            // Except the listener and ourselves
                            if (dest_fd != listener &amp;&amp; dest_fd != sender_fd) {
                                if (send(dest_fd, buf, nbytes, 0) == -1) {
                                    perror(&quot;send&quot;);
                                }
                            }
                        }
                    }
                } // END handle data from client
            } // END got ready-to-read from poll()
        } // END looping through file descriptors
    } // END for(;;)--and you thought it would never end!
    
    return 0;
}
</code></pre>
<p>An interesting task to is to swich <code>poll</code> above to <code>epoll</code> on Linux or <code>kqueue</code> on Mac.</p>
<p>For now, a similar server implement in Rust could be like:</p>
<pre><pre class="playground"><code class="language-rust">use std::collections::HashMap;
use std::io::{Read, Write};
use std::net::{Shutdown, SocketAddr, TcpListener, TcpStream};
use std::sync::mpsc::{channel, Receiver, Sender};
use std::sync::{Arc, Mutex};
use std::thread;

fn handle_client(
    mut stream: TcpStream,
    sender_agent: Sender&lt;(SocketAddr, String)&gt;, // agent sender for broadcast message to others
    receiver: Receiver&lt;String&gt;, // broadcast receiver to get message from other client
    peer_addr: SocketAddr,      // client addr
    sender_map: Arc&lt;Mutex&lt;HashMap&lt;SocketAddr, Sender&lt;String&gt;&gt;&gt;&gt;, // handle for remove disconnected senders from sender_map
) {
    let mut data = [0 as u8; 50]; // using 50 byte buffer

    let mut stream_clone = stream.try_clone().expect(&quot;clone failed...&quot;);
    std::thread::spawn(move || {
        while match receiver.recv() {
            Ok(msg) =&gt; {
                stream_clone.write(msg.as_bytes()).unwrap();
                true
            }
            Err(e) =&gt; {
                println!(&quot;Client {} disconnected. Message: {}&quot;, peer_addr, e);
                false
            }
        } {}
    });

    while match stream.read(&amp;mut data) {
        Ok(0) =&gt; {
            // Stream ended as client closed, clean up stuff here
            sender_map.lock().unwrap().remove(&amp;peer_addr);
            false
        }
        Ok(size) =&gt; {
            // echo everything!
            // stream.write(&amp;data[0..size]).unwrap();
            let to_send = std::str::from_utf8(&amp;data[0..size]).unwrap_or(&quot;?&quot;).into();
            match sender_agent.send((peer_addr.clone(), to_send)) {
                Ok(_) =&gt; true,
                Err(e) =&gt; {
                    println!(&quot;{}&quot;, e);
                    sender_map.lock().unwrap().remove(&amp;peer_addr);
                    false
                }
            }
        }
        Err(_) =&gt; {
            println!(
                &quot;An error occurred, terminating connection with {}&quot;,
                stream.peer_addr().unwrap()
            );
            stream.shutdown(Shutdown::Both).unwrap();
            false
        }
    } {}
}

fn main() {
    let listener = TcpListener::bind(&quot;0.0.0.0:3333&quot;).unwrap();
    // accept connections and process them, spawning a new thread for each one
    println!(&quot;Server listening on port 3333&quot;);

    let (sender_agent, recv_agent) = channel::&lt;(SocketAddr, String)&gt;();
    let sender_map: Arc&lt;Mutex&lt;HashMap&lt;SocketAddr, Sender&lt;String&gt;&gt;&gt;&gt; =
        Arc::new(Mutex::new(HashMap::new()));
    let sender_map_copy = sender_map.clone();

    // Agent thread
    thread::spawn(move || {
        while match recv_agent.recv() {
            Ok((addr, msg)) =&gt; {
                print!(&quot;[{}]: {}&quot;, &amp;addr, msg.as_str());
                for (key, sender_in_map) in sender_map_copy.lock().unwrap().iter() {
                    if key == &amp;addr {
                        continue;
                    }

                    match sender_in_map.send(format!(&quot;[{}]: {}&quot;, addr, msg)) {
                        Ok(_) =&gt; {}
                        Err(e) =&gt; println!(&quot;{}&quot;, e),
                    }
                }
                true
            }
            Err(e) =&gt; {
                println!(&quot;{:?}&quot;, e);
                true
            }
        } {}
    });

    for stream in listener.incoming() {
        let sender_agent_copy = sender_agent.clone();
        let (sender_in_map, recv) = channel();
        match stream {
            Ok(mut stream) =&gt; {
                let peer_addr = stream.peer_addr().unwrap();
                println!(&quot;New connection: {}&quot;, peer_addr);
                stream
                    .write(format!(&quot;Welcome {}\n&quot;, peer_addr).as_bytes())
                    .unwrap();

                let sender_map_copy = sender_map.clone();
                sender_map_copy
                    .lock()
                    .unwrap()
                    .insert(peer_addr.clone(), sender_in_map.clone());
                thread::spawn(move || {
                    // connection succeeded
                    handle_client(stream, sender_agent_copy, recv, peer_addr, sender_map_copy)
                });
            }
            Err(e) =&gt; {
                println!(&quot;Error: {}&quot;, e);
                /* connection failed */
            }
        }
    }
    // close the socket server
    drop(listener);
}
</code></pre></pre>
<h1 id="java"><a class="header" href="#java">Java</a></h1>
<p>An interesting blog on some Java Features such as
<code>DelayQueue</code> <code>StampedLock</code> and <code>Phaser</code>
<a href="https://piotrminkowski.com/2022/01/05/useful-unknown-java-features/">English</a>,
<a href="https://www.infoq.cn/article/tWHfLK4Kxphu3JDhlds5">Chinese</a></p>
<p>A video about <code>Phaser</code> and <code>StampedLock</code></p>
<iframe width="640" height="360"
src="https://www.youtube.com/embed/n_5ZO3NQnxM"
frameborder="0" allow="accelerometer; autoplay; clipboard-write;
encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe><h1 id="scheduler-stuff"><a class="header" href="#scheduler-stuff">Scheduler stuff</a></h1>
<pre><code class="language-java">  @Test
  public void a() throws Exception {
    ExecutorService executor = Executors.newSingleThreadExecutor();
    Runnable runnable =
        () -&gt; {
          try {
            while (true) {
              System.out.println(&quot;Running&quot;);
              Thread.sleep(1000);
            }
          } catch (InterruptedException e) {
            System.out.println(&quot;Runnable interrupted&quot;);
          } finally {
            System.out.println(&quot;FINALLY&quot;);
          }
        };

    Future&lt;?&gt; future = executor.submit(callable);
    try {
      future.get(3, TimeUnit.SECONDS); // blocking for 3 seconds
    } catch (TimeoutException e) {
      System.out.println(&quot;Timeout &quot; + e);
      // future will continue running even if we got a TimeoutException
    } catch (InterruptedException | ExecutionException e) {
      System.out.println(&quot;Interrupted&quot;);
    }
    Thread.sleep(3 * 1000);
    System.out.println(&quot;END&quot;);
  }
</code></pre>
<p>Output:</p>
<pre><code>Running
Running
Running
Running
Timeout java.util.concurrent.TimeoutException
Running
Running
Running
END
</code></pre>
<p>Now if we do call <code>cancel</code> on the <code>future</code>, then 
it works as expected.</p>
<pre><code class="language-java">  @Test
  public void b() throws Exception {
    ExecutorService executor = Executors.newSingleThreadExecutor();
    Runnable r =
        () -&gt; {
          try {
            while (true) {
              System.out.println(&quot;Running&quot;);
              Thread.sleep(1000);
            }
          } catch (InterruptedException e) {
            System.out.println(&quot;Runnable interrupted&quot;);
          } finally {
            System.out.println(&quot;FINALLY&quot;);
          }
        };

    Future&lt;?&gt; future = executor.submit(r);
    try {
      future.get(3, TimeUnit.SECONDS);
    } catch (TimeoutException e) {
      // To stop future running, we need to call cancel on it.
      boolean c = future.cancel(true);
      System.out.println(&quot;Timeout &quot; + e);
    } catch (InterruptedException | ExecutionException e) {
      System.out.println(&quot;interrupted&quot;);
    }
    Thread.sleep(3 * 1000);
    System.out.println(&quot;END&quot;);
  }
</code></pre>
<p>Output</p>
<pre><code>  Running
Running
Running
Runnable interrupted
FINALLY
Timeout java.util.concurrent.TimeoutException
END
</code></pre>
<h1 id="cli-tools"><a class="header" href="#cli-tools">CLI tools</a></h1>
<ul>
<li><a href="https://github.com/junegunn/fzf">fzf</a> shell histroy and fuzzy find </li>
<li><a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> <code>rg -i xxx</code> to grep content</li>
</ul>
<p>Maybe try some <a href="https://switowski.com/blog/favorite-cli-tools#fish-shell">other stuff</a> another day</p>
<h1 id="probability-and-statistics"><a class="header" href="#probability-and-statistics">Probability and Statistics</a></h1>
<p>Upon successful completion of this course, you will:</p>
<h3 id="at-a-conceptual-level"><a class="header" href="#at-a-conceptual-level">At a conceptual level:</a></h3>
<ul>
<li>Master the basic concepts associated with <code>probability models</code> .</li>
<li>Be able to translate models described in words to mathematical ones.</li>
<li>Understand the main concepts and assumptions underlying <code>Bayesian and classical inference</code> .</li>
<li>Obtain some familiarity with the range of applications of inference methods .</li>
</ul>
<h3 id="at-a-more-technical-level"><a class="header" href="#at-a-more-technical-level">At a more technical level:</a></h3>
<ul>
<li>Become familiar with basic and common <code>probability distributions</code> .</li>
<li>Learn how to use <code>conditioning</code> to simplify the analysis of complicated models.</li>
<li>Have facility manipulating <code>probability mass functions</code> , <code>densities</code> , and <code>expectations</code> .</li>
<li>Develop a solid understanding of the concept of <code>conditional expectation</code> and its role in inference.</li>
<li>Understand the power of <code>laws of large numbers</code> and be able to use them when appropriate.</li>
<li>Become familiar with the basic inference methodologies (for both <code>estimation and hypothesis testing</code> ) and be able to apply them.</li>
<li>Acquire a good understanding of two <code>basic stochastic processes</code> (Bernoulli and Poisson) and their use in modeling.</li>
<li>Learn how to formulate simple dynamical models as <code>Markov chains</code> and analyze them.</li>
</ul>
<h1 id="useful-maths-equations"><a class="header" href="#useful-maths-equations">Useful maths equations</a></h1>
<h2 id="geometric-series"><a class="header" href="#geometric-series">Geometric series</a></h2>
<p>\[ 
{\sum^{\infty }_{n = 0} r^n} = \frac 1 {1 - r} \quad \text{if } |r| &lt; 1
\]</p>
<p>\[ 
{\sum^{\infty }_{n = 1} r^n} = \frac {r} {1 - r} \quad \text{if } |r| &lt; 1
\]</p>
<p>\[ 
\frac{1}{2} + \frac{1}{4} + \frac{1}{8} + ... = \frac 1 2 {\sum^{\infty }_{n = 0} \frac{1}{2^n}} = \frac 1 2 \frac 1 {1-\frac 1 2} = 1
\]</p>
<h2 id="integration-by-parts"><a class="header" href="#integration-by-parts">integration by parts</a></h2>
<p>\[
\int u \mathrm{d} v = uv - \int v \mathrm{d} u
\]</p>
<h1 id="chapter-1---basics-and-bayes-rule"><a class="header" href="#chapter-1---basics-and-bayes-rule">Chapter 1 - Basics and Bayes' Rule</a></h1>
<h3 id="de-morgans-law"><a class="header" href="#de-morgans-law">De Morgans' Law</a></h3>
<ul>
<li>
<p>\( (S \cap T)^c = S^c \cup T^c \) and \( (S \cup T)^c = S^c \cap T^c \)</p>
</li>
<li>
<p>\( (S^c \cap T^c)^c = S \cup T \)</p>
</li>
</ul>
<h3 id="problem-4-parking-lot-problem"><a class="header" href="#problem-4-parking-lot-problem">Problem 4. Parking lot problem</a></h3>
<p>Mary and Tom park their cars in an empty parking lot with ùëõ‚â•2 consecutive parking spaces (i.e, ùëõ spaces in a row, where only one car fits in each space). Mary and Tom pick parking spaces at random; of course, they must each choose a different space. (All pairs of distinct parking spaces are equally likely.) What is the probability that there is at most one empty parking space between them?</p>
<details>
<summary>View answer</summary>
<ul>
<li>when first car is at head or tail, second car has 2 configurations for each case (gives 4 configurations)</li>
<li>when first car is at head+1 or tail-1, second har has 3 configurations for each case (gives 6 configurations)</li>
<li>when first car is at the rest of the place, second car has 4 configurations for each case, giving 4*(n-4) configurations</li>
<li>the total number of all possible configurations is n*(n-1)</li>
<li>so the answer should be (4*(n-4)+ 4 +6)/(n*(n-1))</li>
</ul>
</details>
<h3 id="3-important-tools"><a class="header" href="#3-important-tools">3 Important tools</a></h3>
<ul>
<li>Multiplication rule</li>
<li>Total probability theorem</li>
<li>Bayes' rule (-&gt; inference)</li>
</ul>
<h3 id="conditional-probability"><a class="header" href="#conditional-probability">Conditional probability</a></h3>
<p>\[
P(A | B) = \frac{ P(A \cap B)}{ P(B)}
\]</p>
<p>\[
P(A | B) P(B)= P(B | A) P(A)
\]</p>
<p>\[
P(A | B) = \frac{ P(B | A) P(A) } { P(B | A) P(A) + P(B | A^C) P( A^C)}
\]</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/161689/118391403-61c83f00-b634-11eb-930a-5a3485b787e7.png" width="200" alt="image"/>
</p>
<h3 id="multiplication-rule"><a class="header" href="#multiplication-rule">Multiplication rule</a></h3>
<p><img src="https://user-images.githubusercontent.com/161689/118391741-35152700-b636-11eb-8693-2175e57036bc.png" alt="image" /></p>
<h3 id="total-probability-theorem"><a class="header" href="#total-probability-theorem">Total probability theorem</a></h3>
<p align="center">
<img src="https://user-images.githubusercontent.com/161689/118392492-51b35e00-b63a-11eb-91a8-d213871c1a12.png" width="160" alt="image"/>
</p>
<p>\(
P(B) = P(B | A) P(A) + P(B | A^C) P( A^C)
\) can be generalized to:</p>
<p>\[
P(B) = \sum_{i} P(B | A_i) P(A_i) \quad \text{ given } \sum_i P(A_i) = 1
\]</p>
<h3 id="definition-of-independence"><a class="header" href="#definition-of-independence">Definition of independence:</a></h3>
<p>\[
P(A \cap B) = P(A) \cdot P(B)
\]</p>
<p>Which also implies \( P(B | A) = P(B); P(A | B) = P(A)\), and also implies
\( P(A \cap B^C) = P(A) \cdot P(B^C) \).</p>
<p>Note that <code>√¨ndependence</code> has no relation related to <code>disjoint</code>.
Independence is a relation about information. It is important 
to always keep in mind the intuitive meaning of independence.
Two events are independent if the occurrence of one event 
does not change our beliefs about the other.</p>
<h3 id="conditional-independence"><a class="header" href="#conditional-independence">Conditional independence</a></h3>
<p><img src="https://user-images.githubusercontent.com/161689/118397477-80d6c900-b654-11eb-8200-a9ad148dc8a6.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/118397652-651ff280-b655-11eb-9b29-42c8a4bfa275.png" alt="image" /></p>
<hr />
<h3 id="permutation--combination"><a class="header" href="#permutation--combination">Permutation &amp; Combination</a></h3>
<p>Permutation - pick <code>r</code> items out of <code>n</code> items, order matters:
\[
P = \frac{n!}{(n-r)!}
\]</p>
<p>Combination - pick <code>r</code> items out of <code>n</code> items, order does not matter:
\[
C = \frac{P}{r!} = \frac{n!}{(n-r)! \cdot r!}
\]</p>
<p>Number of subsets of <code>n</code> element:
\[
2^n
\]</p>
<p>\[
\sum_{k=0}^{n} \left(
\begin{array}{c}
n \\
k
\end{array}
\right) = 2^n
\]</p>
<p>Number of possible outcomes of continuously toss a fair 6-faces dice for <code>n</code> times:
\[
6^n
\]</p>
<p><strong>Binomial coefficient</strong> \( \left( \begin{array}{c} n \\ k  \end{array} \right) \)</p>
<ul>
<li>n&gt;=1 independent coin tosses <code>P(H)=p</code> :
\[
P(k \quad heads) = \left(
\begin{array}{c}
n \\
k
\end{array}
\right) p^k (1-p)^{n-k} 
\]</li>
</ul>
<p>\[
\sum_{k=0}^{n} \left(
\begin{array}{c}
n \\
k
\end{array}
\right) p^k (1-p)^{n-k} = 1
\]</p>
<p><strong>Multinomial coefficient</strong></p>
<p><img src="https://user-images.githubusercontent.com/161689/118716976-bf6fad80-b825-11eb-9182-4b8f74994077.png" alt="image" /></p>
<hr />
<h1 id="chapter-2---discrete-random-variables"><a class="header" href="#chapter-2---discrete-random-variables">Chapter 2 - Discrete Random Variables</a></h1>
<p>Random variable examples:</p>
<ul>
<li>Bernoulli</li>
<li>Uniform</li>
<li>Binomial </li>
<li>Geometric</li>
</ul>
<h2 id="random-variables"><a class="header" href="#random-variables">Random Variables</a></h2>
<p>Random variables can be understand as a <code>function</code> that
transfers <code>a random selection</code> of a sample, into a 
numeric value.</p>
<p>ÈöèÊú∫ÂèòÈáèÂèØ‰ª•Áúã‰ΩúÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºÅÔºÅÔºÅ</p>
<p><strong>Notation:</strong> random variable <code>X</code>, numerical value <code>x</code></p>
<h2 id="probability-mass-function-pmf"><a class="header" href="#probability-mass-function-pmf">Probability Mass Function (PMF)</a></h2>
<p><code>PMF</code> also called as <code>probablility distribution</code>.</p>
<h3 id="bernoulli"><a class="header" href="#bernoulli">Bernoulli</a></h3>
<ul>
<li>X = 1, with probability p,</li>
<li>X = 0, with probability 1 - p.</li>
</ul>
<p>E[X] = p;</p>
<p>var(X) = E[X^2] - (E[X])^2 = p(1-p)</p>
<h3 id="uniform"><a class="header" href="#uniform">Uniform</a></h3>
<ul>
<li>each outcome have the same probability</li>
<li>h(X) = 1 / (b-a+1)</li>
<li>E[X] = (a + b) / 2</li>
<li>var(X) = 1/12 * (b-a) * (b-a+2)</li>
</ul>
<p>For the continuous case:</p>
<ul>
<li>E[X] = (a + b) / 2</li>
<li>var(X) = 1/12 * (b-a)^2</li>
</ul>
<h3 id="binomial"><a class="header" href="#binomial">Binomial</a></h3>
<ul>
<li><code>n</code> independent tosses of a coin with P(Heads)=p,
with <code>X</code> = number of heads observed.</li>
</ul>
<p>E(X) = E(X1) + E(X2) ... + E(Xn) = p + p + p + ... p = n * p</p>
<p>var(X) = var(X1 + X2 + ...) = var(X1) + var(X2)... 
= n * var(X1) = n * BernoulliVar = np(1-p)</p>
<p>Note above: because of independence.</p>
<h3 id="geometric"><a class="header" href="#geometric">Geometric</a></h3>
<ul>
<li>infinitely many independent tosses of a coin,
P(Heads)=p,<code>X</code> = number of tosses until the first Heads.
\( P(X=k) = (1-p)^{k-1} p \). If p=0.5, then it is like 
1/2, 1/4, 1/8 ... </li>
<li>model the time we have to wait until something happens, especially 
for the continuous case.</li>
</ul>
<p><em>Memorylessness</em></p>
<ul>
<li>E[X] = 1 / p</li>
<li>var(X) = (1-p)/p^2</li>
</ul>
<p>For the continuous case:</p>
<ul>
<li>E[x] = 1/lambda</li>
<li>var(X) = 1/lambda^2</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/161689/120707865-1da1bf00-c4bb-11eb-97db-41c577f516c5.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/123541710-25fdba80-d746-11eb-8f2d-6e455fa48a63.png" alt="image" /></p>
<h2 id="variance"><a class="header" href="#variance">Variance</a></h2>
<p><img src="https://user-images.githubusercontent.com/161689/120107513-94f4ed00-c161-11eb-8339-80539c5681be.png" alt="image" /></p>
<p><img src="https://user-images.githubusercontent.com/161689/122638344-dee34a00-d0f3-11eb-9110-e9865fc4f380.png" alt="independence" /></p>
<h1 id="-vi-editor-tips"><a class="header" href="#-vi-editor-tips">üìù Vi editor tips</a></h1>
<h2 id="moving"><a class="header" href="#moving">Moving</a></h2>
<pre><code>w   move to beginning of next word
b   move to previous beginning of word
e   move to end of word
ge  move to previous end of word

gg  move to first line
G   move to last line
12gg or 12G moves to line 12

0   move to beginning of line
$   move to end of line
_   üî• move to first non-blank character of the line
g_  move to last non-blank character of the line

g;  üî• jump to the place of last edit. can be quite helpful while debugging or editing files.

%   move to the matching part of a (, [ or {
[{  move to the first enclosure of { above

Ctrl-D  move half-page down
Ctrl-U  move half-page up
Ctrl-B  page up
Ctrl-F  page down
Ctrl-O  üî• jump to last (older) cursor position
Ctrl-I  üî• jump to next cursor position (after Ctrl-O)
Ctrl-Y  move view pane up
Ctrl-E  move view pane down

n   üî• next matching search pattern
N   previous matching search pattern
*   üî• next whole word under cursor
#   previous whole word under cursor
g*  next matching search (not whole word) pattern under cursor
g#  previous matching search (not whole word) pattern under cursor
gd  üî• go to definition/first occurrence of the word under cursor

fX  fall onto to next 'X', in the same line (X is any character)
FX  fall to previous 'X' (f and F put the cursor on X)
tX  til next 'X' (similar to above, but cursor is before X)
TX  til previous 'X' (cursor is behind X)
</code></pre>
<h2 id="editing"><a class="header" href="#editing">Editing</a></h2>
<pre><code>i, a, A, o, O   into insert mode in different locations
r, R            replace char or word

ci&quot;             change inside quotes
di&quot;             delete inside quotes

ca&quot;             change around quotes, include quotes
da&quot;             delete around quotes

,, (2 comma)    üîß customized to add a ; at the end of the line
                inoremap &lt;leader&gt;, &lt;C-o&gt;A;&lt;ESC&gt;
                innoremap &lt;leader&gt;, A;&lt;ESC&gt;
</code></pre>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<pre><code>:noh           turn off highlight
:set hls       highlight all matching phrases
:set ic        set ignore case for search
:set noic      set not ignore case again
:set invic     use inv to invert the option - f.g. ic here
</code></pre>
<h2 id="search-stuff"><a class="header" href="#search-stuff">Search stuff</a></h2>
<pre><code>/              find pattern
n              go to next found pattern

:! grep -rin -A2 -B2 --color --include=\*.md . -e 'yank'
                             use a grep command to show what md files from
                             current directory contains word 'yank' or 'Yank'
                             r: recursive, n: show line number, i: ignore case
</code></pre>
<h2 id="replacesubstitue-stuff"><a class="header" href="#replacesubstitue-stuff">Replace/Substitue stuff</a></h2>
<pre><code>To substitute new for the first old in a line type
~~~ cmd
        :s/old/new
~~~
    To substitute new for all 'old's on a line type

~~~ cmd
        :s/old/new/g
~~~
    To substitute phrases between two line #'s type

~~~ cmd
        :#,#s/old/new/g
~~~
    To substitute all occurrences in the file type

~~~ cmd
        :%s/old/new/g
~~~
    To ask for confirmation each time add 'c'

~~~ cmd
        :%s/old/new/gc
~~~
</code></pre>
<h2 id="copy-paste-stuff"><a class="header" href="#copy-paste-stuff">Copy Paste stuff</a></h2>
<p>How to select a word, copy it and replace another word.</p>
<pre><code>yiw	    Yank inner word (copy word under cursor, say &quot;first&quot;).
...	    Move the cursor to another word (say &quot;second&quot;).
viwp	Select &quot;second&quot;, then replace it with &quot;first&quot;.
...	    Move the cursor to another word (say &quot;third&quot;).
viw&quot;0p	Select &quot;third&quot;, then replace it with &quot;first&quot;.

üî• Copy a word and paste it over other words:

yiw	    Yank inner word (copy word under cursor, say &quot;first&quot;).
...	    Move the cursor to another word (say &quot;second&quot;).
ciw Ctrl-R 0 Esc	üî•Change &quot;second&quot;, replacing it with &quot;first&quot;.
...	    Move the cursor to another word (say &quot;third&quot;).
.	    Repeat the operation (change word and replace it with &quot;first&quot;).
...	    Move the cursor to another word and press . to repeat the change.

Copy text in quotes, and paste it over other quoted text:

yi&quot;	    Yank inner text (text containing cursor which is in quotes).
...	    Move the cursor to other quoted text.
ci&quot; Ctrl-R 0 Esc	üî•Change the quoted text, replacing it with the copied text.
...	    Move the cursor to more quoted text.
.	    Repeat the operation (change the quoted text and replace it with the copy).
...	    Move the cursor to more quoted text and press . to repeat the change.

Copy a line and paste it over other lines:

yy	    Yank current line (say &quot;first line&quot;).
...	    Move the cursor to another line (say &quot;second line&quot;).
Vp	    Select &quot;second line&quot;, then replace it with &quot;first line&quot;.
...	    Move the cursor to another line (say &quot;third line&quot;).
V&quot;0p    Select &quot;third line&quot;, then replace it with &quot;first line&quot;.

Deleting, changing and yanking text copies the affected text to the unnamed register (&quot;&quot;). Yanking text also copies the text to register 0 (&quot;0). So the command yiw copies the current word to &quot;&quot; and to &quot;0.

yl /vy/xu     Yank current character. Composing the yank operation with the so often used &quot;one character to the right&quot; motion
</code></pre>
<h2 id="window-and-tab"><a class="header" href="#window-and-tab">Window and Tab</a></h2>
<pre><code>Ctrl-W s   split window horiontally, can be used with ctrlpvim after Ctrl-P to open file
Ctrl-W v   split window vertically, can be used with ctrlpvim after Ctrl-P to open file

Ctrl-W l   jump to the window on the right

Ctrl-W x   switch current window with next one

gt         move to the tab after
gT         move to the tab before
gt3        move to tab number 3
</code></pre>
<h2 id="group-change"><a class="header" href="#group-change">Group change</a></h2>
<pre><code>Ctrl-V,  then move to select, then Shift-&lt;action&gt;, then ESC 
</code></pre>
<h2 id="commenting"><a class="header" href="#commenting">Commenting</a></h2>
<p>With plugin:</p>
<ul>
<li>Plug 'scrooloose/nerdcommenter'</li>
</ul>
<pre><code>[count]&lt;leader&gt;cc |NERDCommenterComment|   Comment out the current line or text selected in visual mode.
[count]&lt;leader&gt;cn |NERDCommenterNested|    Same as cc but forces nesting.
[count]&lt;leader&gt;c&lt;space&gt; |NERDCommenterToggle|  Comment Toggle

[count] gcc     üîß comment toggle, need a special setup, see my mac-settings repo's config files.
</code></pre>
<p>For IntelliJ's ideavim plugin, add <code>set commentary</code> in it's config file.
If in IntelliJ with the ideavim plugin, use <code>gcc</code> to comment.</p>
<h2 id="turn-off-search-highlight"><a class="header" href="#turn-off-search-highlight">Turn off search highlight</a></h2>
<pre><code>:noh
</code></pre>
<h2 id="spell-check-with-neovim"><a class="header" href="#spell-check-with-neovim">Spell check with NeoVim</a></h2>
<pre><code>z=     give suggestions
zg     add it as a good word
zw     add it as a wrong word
</code></pre>
<h2 id="plugin-nerdtree"><a class="header" href="#plugin-nerdtree">Plugin NERDTree</a></h2>
<pre><code>,t      focus on tree view
Ctrl-t  toggle tree view

Ctrl-j  üîß customized - :NERDTreeFind
,n      üîß customized - :NERDTreeFind
</code></pre>
<h2 id="plugin-ctrlp-to-find-and-open-files"><a class="header" href="#plugin-ctrlp-to-find-and-open-files">PlugIn CtrlP to find and open files</a></h2>
<pre><code>F5               refresh files
Ctrl-p           open serach
Ctrl-p Ctrl-s/v  open in new window
Ctrl-p Ctrl-t    open in new tab

,p               üîß only search in buffered files
                 # above command is customized via setting:
                 # nnoremap &lt;leader&gt;p :CtrlPBuffer&lt;CR&gt; 
</code></pre>
<h2 id="plugin-vimtest"><a class="header" href="#plugin-vimtest">PlugIn VimTest</a></h2>
<pre><code>Plug 'vim-test/vim-test'
https://github.com/vim-test/vim-test
:TestNearest run nearest test
:TestFile    run all test in file
:TestSuite   run the whole test suite
:TestLast    run last test
:TestVisit   visit the test file from which you last run your tests
</code></pre>
<h2 id="-customized-coc-shortcut"><a class="header" href="#-customized-coc-shortcut">üîß Customized COC shortcut</a></h2>
<pre><code>Ctrl-l     üîß reformat file
Ctrl-space    give suggestions

gb         üîß go to definition
gy         üîß go to type definition
gi         üîß go to implementation
gr         üîß references

gp         go to previous issue
g√•         go to next issue

K          show documentation
</code></pre>
<hr />
<h1 id="tmux"><a class="header" href="#tmux">Tmux</a></h1>
<h2 id="window-and-pane"><a class="header" href="#window-and-pane">Window and Pane</a></h2>
<pre><code>Ctrl-b c      create window
Ctrl-b n/p    go to next or previous window
Ctrl-b w      list all windows
Ctrl-b 0/1..  go to window number 0/1/...

Ctrl-b %      split horisontal pane
Ctrl-b &quot;      split vertical pane
Ctrl-b o      go to next pane
</code></pre>
<h2 id="tmux-session"><a class="header" href="#tmux-session">Tmux Session</a></h2>
<pre><code>tmux new -s &lt;name&gt;   create new session
Ctrl-b d             detach session
Ctrl-b x             kill current session
tmux ls              list sessions

tmux kill-session -t [name]
tmux rename-session [-t current-name] [new-name]
Ctrl-b $             to rename session while in tmux
</code></pre>
<h1 id="some-markdown-tips"><a class="header" href="#some-markdown-tips">Some Markdown Tips</a></h1>
<p>Simply write sub topics here.</p>
<p>Did you know that you can write math equations here like this?</p>
<p>\[ \mu = \frac{1}{N} \sum_{i=0} x_i \]</p>
<p>The Master Method
\[
\begin{align}
\text{If }  \quad  T(n) &amp; &lt;= a T (\frac{n}{b}) + O(n^d) \\
\text{Then } \quad  T(n) &amp; =
\begin{cases}
O(n^d \log n)       &amp; \quad \text{if } a = b^d \text{ (Case 1)} \\
O(n^d)              &amp; \quad \text{if } a &lt; b^d \text{ (Case 2)} \\
O(n^{\log_{b}{a} }) &amp; \quad \text{if } a &gt; b^d \text{ (Case 3)}
\end{cases}
\end{align}
\]</p>
<p>Looks pretty awesome. More info see <a href="https://rust-lang.github.io/mdBook/format/mathjax.html">here</a></p>
<h3 id="add-a-table"><a class="header" href="#add-a-table">Add a table</a></h3>
<pre><code>|name   | length|
|----   |:-----:|
|oarfish| 10m?  |
</code></pre>
<table><thead><tr><th>name</th><th align="center">length</th></tr></thead><tbody>
<tr><td>oarfish</td><td align="center">10m?</td></tr>
</tbody></table>
<h3 id="add-a-image"><a class="header" href="#add-a-image">Add a image</a></h3>
<p>You can sort of use github issue page to store some pictures perhaps?</p>
<pre><code>![image](https://user-images.githubusercontent.com/161689/111823245-02280e80-88e5-11eb-849d-b4d1e29c76ce.png)
</code></pre>
<h3 id="hidden-session"><a class="header" href="#hidden-session">Hidden session</a></h3>
<p>And a hidden session like this to hide a graph:</p>
<pre><code class="language-html">&lt;details&gt;
&lt;summary&gt;Some hidden stuff here&lt;/summary&gt;

![image](https://user-images.githubusercontent.com/161689/111823245-02280e80-88e5-11eb-849d-b4d1e29c76ce.png)

&lt;/details&gt;
</code></pre>
<details>
<summary>Some hidden code here</summary>
<img src="https://user-images.githubusercontent.com/161689/111823245-02280e80-88e5-11eb-849d-b4d1e29c76ce.png" width="640" />
</details>
<h3 id="embed-an-youtube-video-like-this"><a class="header" href="#embed-an-youtube-video-like-this">Embed an YouTube Video like this:</a></h3>
<pre><code class="language-html">&lt;iframe width=&quot;640&quot; height=&quot;360&quot; 
    src=&quot;https://www.youtube.com/embed/WbzNRTTrX0g?t=1557&quot; 
    frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write;
    encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;
&lt;/iframe&gt;
</code></pre>
<h3 id="mermaid-graphs"><a class="header" href="#mermaid-graphs">Mermaid graphs</a></h3>
<p>See <a href="https://mermaid-js.github.io/mermaid-live-editor/">here</a>
and <a href="https://github.com/badboy/mdbook-mermaid">here</a>.</p>
<pre><code>```mermaid
graph TD
    A[Christmas] --&gt;|Get money| B(Go shopping)
    B --&gt; C{Let me think}
    C --&gt;|One| D[Laptop]
    C --&gt;|Two| E[iPhone]
    C --&gt;|Three| F[fa:fa-car Car]
```
</code></pre>
<p>gives:</p>
<pre class="mermaid">graph TD
    A[Christmas] --&gt;|Get money| B(Go shopping)
    B --&gt; C{Let me think}
    C --&gt;|One| D[Laptop]
    C --&gt;|Two| E[iPhone]
    C --&gt;|Three| F[fa:fa-car Car]
</pre>
<h1 id="markdown-notes"><a class="header" href="#markdown-notes">Markdown Notes</a></h1>
<h2 id="tag-details-for-hide-or-expandable-content"><a class="header" href="#tag-details-for-hide-or-expandable-content">Tag <code>&lt;details&gt;</code> for hide or expandable content</a></h2>
<pre><code class="language-md">
&lt;details&gt;
  &lt;summary&gt;Summary Goes Here&lt;/summary&gt;
  ...this is hidden, collapsable content...
&lt;/details&gt;
</code></pre>
<p>which looks like:</p>
<details>
 <summary>Summary Goes Here</summary>
 ...this is hidden, collapsable content...
</details>
<h3 id="if-content-inside-cannot-render-as-markdown"><a class="header" href="#if-content-inside-cannot-render-as-markdown">If content inside cannot render as markdown</a></h3>
<p>Try put <code>&lt;details&gt;</code> just after a <code># title</code>. 
(Perhaps just an issue for Spotify techdoc...)</p>
<pre><code class="language-md">### Just a title can make content inside `&lt;details&gt;` render
&lt;details&gt;
 &lt;summary&gt;Click to open&lt;/summary&gt;

&gt;&gt;&gt; stuff markdown can render
&lt;/details&gt;
</code></pre>
<h4 id="example"><a class="header" href="#example">Example</a></h4>
<details>
 <summary>Click to open</summary>
<blockquote>
<blockquote>
<p>stuff markdown can render</p>
</blockquote>
</blockquote>
</details>
<h3 id="nested-version"><a class="header" href="#nested-version">Nested version</a></h3>
<pre><code class="language-md">&lt;details&gt;&lt;summary&gt; root &lt;/summary&gt;
&lt;blockquote&gt;
  &lt;details&gt;&lt;summary&gt; bin &lt;/summary&gt;
&lt;blockquote&gt;
      &lt;details&gt;&lt;summary&gt; nest1 &lt;/summary&gt;
&lt;blockquote&gt;

~~~
a
b
c
~~~
&lt;/blockquote&gt;
      &lt;/details&gt;
      &lt;details&gt;&lt;summary&gt; nest2 &lt;/summary&gt;
        &lt;blockquote&gt;
          a b c
        &lt;/blockquote&gt;
      &lt;/details&gt;

~~~
file1
file2
file3
~~~
  &lt;/blockquote&gt;
  &lt;/details&gt;

  &lt;details&gt;&lt;summary&gt; boot &lt;/summary&gt;&lt;blockquote&gt;
  x y z
  &lt;/blockquote&gt;&lt;/details&gt;

&lt;/blockquote&gt;
&lt;/details&gt;
</code></pre>
<details><summary> root </summary>
<blockquote>
  <details><summary> bin </summary>
<blockquote>
      <details><summary> nest1 </summary>
<blockquote>
<pre><code>a
b
c
</code></pre>
</blockquote>
      </details>
      <details><summary> nest2 </summary>
        <blockquote>
          a b c
        </blockquote>
      </details>
<pre><code>file1
file2
file3
</code></pre>
</blockquote>
  </details>
<details><summary> boot </summary><blockquote>
  x y z
  </blockquote></details>
</blockquote>
</details><h1 id="life-tips"><a class="header" href="#life-tips">Life tips</a></h1>
<h2 id="morning-tips"><a class="header" href="#morning-tips">Morning tips</a></h2>
<ul>
<li>Most important time is the 1 hour in the morning</li>
<li>Make bed</li>
<li>Meditation 10-20m, draw attention back to breath, 7 days will have effect?</li>
<li>Tune into the peak state -&gt; &quot;I can do it mode&quot;
<ul>
<li>code shower?!ü§î</li>
<li>4:16:8 breath exercise</li>
<li>short exercise, or a walk outside</li>
<li>5 - 10 daily journal</li>
</ul>
</li>
<li>Peaceful mindset reminding, see below ÈùôÂøÉÂÅö‰∫ãÊ≥ï</li>
</ul>
<h2 id="evening-tips"><a class="header" href="#evening-tips">Evening tips</a></h2>
<ul>
<li>Summary daily journal
<ul>
<li>old/new relationships that helped you</li>
<li>an opportunity recently, (call parents, or work)</li>
<li>something great happened or learned today/yesterday</li>
<li>something simple</li>
</ul>
</li>
</ul>
<p>Ref <a href="https://www.youtube.com/watch?v=XXGINjJzwZs">here</a>, <a href="https://www.youtube.com/watch?v=evXi0G3dVEQ">here</a>.</p>
<h2 id="daily-goal"><a class="header" href="#daily-goal">Daily Goal</a></h2>
<ul>
<li>Plan entertaining hours, delay gratification</li>
<li>Try fight with social media / Youtube addiction</li>
<li>Read more books, write more notes, eat less in the afternoons</li>
<li>Regular fasting</li>
</ul>
<h2 id="daily-productivity-tips"><a class="header" href="#daily-productivity-tips">Daily Productivity Tips</a></h2>
<ul>
<li>Keep a todo list and clear it every day before sleep
<ul>
<li>Put each day's tasks into their own planning/notes</li>
</ul>
</li>
</ul>
<h2 id="weekly-goal"><a class="header" href="#weekly-goal">Weekly Goal</a></h2>
<ul>
<li>Write a weekly work summary and note down
<ul>
<li>major accomplishment</li>
<li>perhaps something learned</li>
<li>perhaps something could be done better, less hurry, or some actions could have been avoided?</li>
</ul>
</li>
</ul>
<h2 id="ËÄêÂøÉ‰∏ìÂøÉÈùôÂøÉ"><a class="header" href="#ËÄêÂøÉ‰∏ìÂøÉÈùôÂøÉ">ËÄêÂøÉÔºå‰∏ìÂøÉÔºåÈùôÂøÉ</a></h2>
<ul>
<li>Á¶ÅËµ∞Èô©Ôºå‰∏ÄËØØ‰∏áËØØ</li>
<li>Á¶ÅÊÄßÁå¥Ôºå‰∫ã‰∏áÂäü‰∏Ä</li>
<li>Á¶ÅÊó†Á´†Ôºå‰ªÖ‰∏ì‰∏á‰∫ã
ÂæóÊúâËÆ°ÂàíÔºåÂàÜ‰∏ªÊ¨°</li>
</ul>
<h2 id="ÈùôÂøÉÂÅö‰∫ãÊ≥ï"><a class="header" href="#ÈùôÂøÉÂÅö‰∫ãÊ≥ï">ÈùôÂøÉÂÅö‰∫ãÊ≥ï</a></h2>
<p>‰∏ÄÂÆöËÆ∞‰ΩèÂπ≤Ê¥ªËØ¥ËØùÁöÑÊó∂ÂÄô‰∏çË¶ÅÊÄ•ÔºåË¶ÅÈùôÂøÉÁªÜÊ∞¥ÁöÑÊù•ÔºåÂåÖÊã¨ÊâìÂ≠óüòÑ ËøôÊ†∑Ë≤å‰ººÂèØ‰ª•Êõ¥ËÉΩÈõÜ‰∏≠Á≤æÂäõ„ÄÇ</p>
<ul>
<li>ËÉΩ<code>ÊÖ¢</code>‰∏ãÊù•Âπ≤‰∫ãÊÉÖÔºåËøôÊ†∑ÁÑ¶Ë∫ÅÊÑüËßâ‰ºöÂáèÂ∞ëÂæàÂ§ö</li>
<li>ËÉΩ<code>ÊÖ¢</code>‰∏ãÊù•ËØ¥‰∫ãÊÉÖÔºåÂà´‰∫∫‰πüËÉΩÂ§üÊõ¥Â•ΩÁöÑÁêÜËß£</li>
</ul>
<p>ËÆ∞ÂæóÂπ¥ËΩªÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆû‰πüÂåÖÊã¨Áé∞Âú®ÔºåÂæàÂ§öÊÉÖÂÜµ‰∏ãËøòÊòØÂπ≤‰∫ãÊÉÖÂ§™ÊÄ•Ë∫ÅÔºåÂåÖÊã¨ÊâìÂ≠óÈÉΩÊÉ≥ÊâìÂæàÂø´„ÄÇ
Áªô‰∫∫ËÆ≤‰∏úË•øËØ¥ËØù‰πüÂø´ÔºåÁùÄÊÄ•Âà´‰∫∫ÁêÜËß£ÊÖ¢„ÄÇÂÖ∂ÂÆûÈÉΩÂèØ‰ª•ÊÖ¢‰∏ãÊù•ÔºåÂπ≥ÁùÄÂøÉÂéªÂÅö‰∫ãÔºåÊúâ‰∏ÄÁßçÁ®≥Â¶•Ôºå
ÂøÉÈùôÁöÑÊÑüËßâ„ÄÇ</p>
<p>ÊÑüËßâËøô‰∏™ÂèØ‰ª•ÊØèÂ§©Êó©‰∏äËµ∑Êù•ÂõûÊÉ≥‰∏Ä‰∏ã„ÄÇ</p>
<h2 id="ÊãñÂª∂Áóá"><a class="header" href="#ÊãñÂª∂Áóá">ÊãñÂª∂Áóá</a></h2>
<ol>
<li>‰ªé‰ΩéÊúüÂæÖÂºÄÂßã</li>
<li>ÂØªÊâæÊàêÂ∞±ÊÑü</li>
<li>ËÆæÂÆöÊúüÈôê</li>
<li>ËøúÁ¶ªÂπ≤Êâ∞</li>
<li>ÂÖàÊêû‰∫îÂàÜÈíüÂÜçËØ¥</li>
</ol>
<blockquote>
<p>‰∏çË¶ÅÊÉ≥ÁùÄÂéªÂÆåÊàê‚úÖ Âè™ÁúãÁé∞Âú®Ëøô‰∫îÂàÜÈíüÔºåÂçäÂ∞èÊó∂ËÉΩÂ∏¶Êù•ÁöÑÂ•ΩÂ§Ñ
Âè™Ë¶Å‰ªäÂ§©‰ΩúÂá∫‰∫Ü‰∏ÄÁÇπÁÇπÊîπËøõÊàñËÄÖËøõÊ≠•ÔºåÊòéÂ§©Â∞±‰ºöÊõ¥Â•Ω‰∏Ä‰∫õ
‰∏çÁÆ°‰Ω†Èù¢ÂØπÁöÑ‰∫ãÊÉÖÊúâÂ§ö‰πàÂõ∞ÈöæÔºå‰Ω†ÊúâÂ§öÊäµËß¶ÔºåÂ§öÂÆ≥ÊÄïÔºåÈÉΩ‰∏çË¶ÅÈÄÉÈÅøÔºåÂõ†‰∏∫Ê≤°‰∫∫ËÉΩÂ∏Æ‰Ω†ÂÅö„ÄÇËÄå‰∏îÂæÄÂæÄ‰Ω†Âè™ÈúÄË¶ÅËøàÂá∫ÈÇ£Á¨¨‰∏ÄÊ≠•ÔºåÂâ©‰∏ãÁöÑÁ¨¨‰∫åÊ≠•„ÄÅÁ¨¨‰∏âÊ≠•„ÄÅÁ¨¨ÂõõÊ≠•ÔºåÈÉΩÊØî‰Ω†ÊÉ≥Ë±°Âú∞Ë¶ÅËΩªÊùæÂæàÂ§ö</p>
</blockquote>
<h2 id="health-tips"><a class="header" href="#health-tips">Health tips</a></h2>
<ul>
<li>
<p>Do more sports</p>
</li>
<li>
<p>vitamin D, potassium and so on are important!</p>
</li>
<li>
<p>listen to Dr. Breg</p>
</li>
</ul>
<h2 id="happier-tips"><a class="header" href="#happier-tips">Happier tips</a></h2>
<ul>
<li>When bored, reach out to a good friend, some family menber, or a memtor for a chat.</li>
</ul>
<h2 id="general-tips"><a class="header" href="#general-tips">General tips</a></h2>
<ul>
<li>From Daniel EK: pay attention to daily accumulation and compound effect after span of years, value the free time you have before you got kids</li>
<li>About stock/market: for average people we can perhaps just do long term investment,
and buy in/after when you hear big crash news, and sell when your friends/relatives
asking you how to open trading accounts.</li>
<li>You can never really predict the top of the market. If you feel things not correct,
the actual change might happen after days or months...</li>
</ul>
<h1 id="career-tips"><a class="header" href="#career-tips">Career Tips</a></h1>
<p>From Mentor <a href="https://www.linkedin.com/in/li-ma-a917331/">Li Ma</a>:</p>
<ul>
<li>Pay attention to leardership traning. 
<ul>
<li>Company scale/document, or maybe follow <a href="https://www.amazon.jobs/en/principles">AWS Leadership Principles</a>. 
Make sure that you can X on all the requirements or requisites' checkboxes for your next level.</li>
<li>Asking for help from the right source is also part of a leadership trait.</li>
</ul>
</li>
<li>Try to be positive and try provide solutions. Complaining won't help you go far.</li>
<li>Find a mentor (2 or a few levels higher) in another part of the organization, ask for some advices regularly.</li>
<li>Resume: Focums on impact and key results on the business side. Tech not important.</li>
</ul>
<p>From Montor <a href="https://www.linkedin.com/in/weiminzhou/">Weimin Zhou</a></p>
<ol>
<li>quantify your impact</li>
<li>quantify your impact</li>
<li>quantify your impact</li>
<li>ask a English professional to fix your gramma</li>
<li>one single line for a bullet point</li>
</ol>
<h1 id="swedish-learning"><a class="header" href="#swedish-learning">Swedish Learning</a></h1>
<ul>
<li><a href="http://folkets-lexikon.csc.kth.se/folkets/folkets.en.html#lookup&amp;Avsnitt">People's Dictionary</a></li>
<li><a href="https://sverigesradio.se/radioswedenpalattsvenska">Radio Sweden p√• l√§tt svenska</a> and click onto the sub session stories to find text.</li>
<li><a href="http://www.uttal.se/">Pronunciation</a></li>
<li><a href="https://open.spotify.com/playlist/4dU92BpVtyXLDLoRGeO9Qw">Swedish Vibe - My Swedish Music List</a></li>
<li><a href="https://www.svtplay.se/video/30816962/vem-bor-har/vem-bor-har-sasong-7-avsnitt-1?modalId=KABJrzD">SVTplay.se seem like a good place - for example</a></li>
<li>Vi ses vi h√∂rs <a href="https://www.youtube.com/watch?v=uy64ifnSS4s&amp;list=PLJwBK_EfxmfE1qsoR1ksklF4o8RyKQgk6">here</a> or <a href="https://www.youtube.com/watch?v=tSL_rrMSBp0&amp;list=PLkNSEOTLl6GNJGQIG0amMLAOHUFjhaOsB">here</a></li>
<li>https://learningswedish.se/ seems a good place for doing exercise.</li>
</ul>
<p>Other learning resources</p>
<ul>
<li><a href="https://www.youtube.com/channel/UCbG0VOqIo9EqEtfE3Ru2BaQ">Slow Swedish with Katrin Berndt</a></li>
<li><a href="https://www.youtube.com/watch?v=bXcFe9umUqg">Slow Swedish - Say it in Swedish</a></li>
</ul>
<h1 id="tv-show---huss"><a class="header" href="#tv-show---huss">TV Show - Huss</a></h1>
<h1 id="s√§song-1---avsnitt-1"><a class="header" href="#s√§song-1---avsnitt-1">S√§song 1 - Avsnitt 1</a></h1>
<h2 id="words"><a class="header" href="#words">Words</a></h2>
<ul>
<li>avfyra - fire</li>
<li>h√§nda - happen</li>
<li>stenar, gatstena - stones, rocks</li>
<li>vilka - which</li>
<li>oklart - unclear, hard to grasp</li>
<li>vi skulle h√§lla v√•ra positioner. inte sl√§ppa f√∂rbi demonstranterna. - we would hold our positions. do not let the protesters pass.</li>
<li>de kom n√§rmare och n√§rmare - they came closer and closer</li>
<li>mer stenar, flaskor, <strong>all m√∂jlig skit</strong> - more rocks, bottles, all sorts of crap</li>
<li><strong>fick</strong> ni n√•t <strong>st√∂d</strong> internt efter√•t - did you receive any <strong>support</strong> internally afterwards</li>
<li>prata - talk</li>
<li>med varann - to each other</li>
<li>du har inga s√•na tankar - you have no such thoughts?</li>
<li>nog - enough / probably</li>
<li>l√§gga (lagt) - put</li>
<li>det hela - all of it</li>
<li>v√§rst - worst</li>
<li>Det viktigaste √§r att vi h√•ller ihop - the most important is we stick together</li>
<li>g√§ller - matter, it is important to </li>
<li>ha koll p√• - keep check of, be aware of</li>
<li>var ert bef√§l √§r - where your commander is </li>
<li>t√§nk p√• - consider, think of, remember,</li>
<li>h√§r - here</li>
<li>lycker till - good luck</li>
<li>l√§gg av - stop / leave off</li>
<li>Sl√§pp - let go</li>
<li>Lugna ner dig</li>
<li>G√∂r some jag s√§ger, s√§tt dig - Do as I say, sit down</li>
<li>G√• dit√•t - go that way</li>
<li>honom - him</li>
<li>n√•nstans - anywhere, somewhere</li>
<li>det r√§cker! - it is enough!</li>
<li>v√§nd dig om - turn around</li>
<li>k√§ften - shut up</li>
<li>tyv√§rr - unfortunately</li>
</ul>
<h1 id="cheese-study"><a class="header" href="#cheese-study">Cheese study</a></h1>
<p>Score from 0 to 5.</p>
<p><img src="https://user-images.githubusercontent.com/161689/114607173-79f71800-9c9c-11eb-8aa6-17a3b8d07dd0.png" width="320" /><br></p>
<p>Score: 5</p>
<p><img src="https://user-images.githubusercontent.com/161689/114607187-7d8a9f00-9c9c-11eb-80c4-5d17d2256ded.png" width="320" /><br></p>
<p>Score: 4, stronger than the one above.</p>
<p><img src="https://user-images.githubusercontent.com/161689/114607152-74013700-9c9c-11eb-88a3-da41c15d89b4.png" width="320" /><br></p>
<p>Score: TODO</p>
<h1 id="restaurants-in-stockholm"><a class="header" href="#restaurants-in-stockholm">Restaurants in Stockholm</a></h1>
<h2 id="asian-style"><a class="header" href="#asian-style">Asian Style</a></h2>
<h3 id="xiang-yue"><a class="header" href="#xiang-yue">Xiang Yue</a></h3>
<ul>
<li>Friendly family style restaurants.</li>
<li>Price: low/mid </li>
<li>Score: 4.8 / 5</li>
</ul>
<h3 id="jappi"><a class="header" href="#jappi">Jappi</a></h3>
<ul>
<li>Where you can try ÁæäËÇâÊ≥°È¶ç</li>
<li>Price: mid</li>
<li>Score 4.5 / 5</li>
</ul>
<h3 id="sibiriens-sinok√∂k---roslagsgatan-25"><a class="header" href="#sibiriens-sinok√∂k---roslagsgatan-25">Sibiriens Sinok√∂k - Roslagsgatan 25</a></h3>
<ul>
<li>Chinese restaurants with a weird name?</li>
<li>Price: </li>
<li>Score: </li>
</ul>
<p>To be tested</p>
<h3 id="koreana-restaurant---luntmakargatan-76"><a class="header" href="#koreana-restaurant---luntmakargatan-76">Koreana Restaurant - Luntmakargatan 76</a></h3>
<ul>
<li>Only if you like code bibimbap...</li>
<li>Price: low</li>
<li>Score: 3.8 / 5</li>
</ul>
<h3 id="an-nam---tegn√©rgatan-19"><a class="header" href="#an-nam---tegn√©rgatan-19">An Nam - Tegn√©rgatan 19</a></h3>
<ul>
<li><a href="https://annam.se">Vietnamese restaurants</a></li>
<li>Price: mid</li>
<li>Score: 4 / 5</li>
</ul>
<p>Pho seems okay nothing too special. Need to try other dishes.</p>
<h3 id="rawbata---r√∂rstrandsgatan-15"><a class="header" href="#rawbata---r√∂rstrandsgatan-15">Rawbata - R√∂rstrandsgatan 15</a></h3>
<ul>
<li><a href="https://rawbata.se/">Japanese BBQ ramen</a> </li>
<li>Price: mid/high</li>
<li>Score: 3.5 / 5</li>
</ul>
<p>Only tried ramen sometime ago, just so so.
Perhaps should try something else next time.</p>
<hr />
<h2 id="other-style"><a class="header" href="#other-style">Other Style</a></h2>
<h3 id="aifur---v√§sterl√•nggatan-68b"><a class="header" href="#aifur---v√§sterl√•nggatan-68b">Aifur - V√§sterl√•nggatan 68b</a></h3>
<ul>
<li><a href="http://aifur.se/meny/">Old town Viking style</a></li>
<li>Price: high</li>
<li>Score: 4.5 / 5</li>
</ul>
<p>Good honey beer and meat, good music and atmosphere.</p>
<h3 id="tehran-gril---r√∂rstrandsgatan-15"><a class="header" href="#tehran-gril---r√∂rstrandsgatan-15">Tehran Gril - R√∂rstrandsgatan 15</a></h3>
<ul>
<li><a href="https://tehrangrill.se/">Persian / middle east style</a></li>
<li>Price: mid</li>
<li>Score: 4 / 5</li>
</ul>
<p>Grilled fish seems quite nice</p>
<h3 id="hot-little-india---sveav√§gen-96"><a class="header" href="#hot-little-india---sveav√§gen-96">Hot little India - Sveav√§gen 96</a></h3>
<ul>
<li><a href="http://www.hotlittleindia.se/">Indian restaurants</a></li>
<li>Price: mid</li>
<li>Score: 4 / 5</li>
</ul>
<h3 id="rawbata---r√∂rstrandsgatan-15-1"><a class="header" href="#rawbata---r√∂rstrandsgatan-15-1">Rawbata - R√∂rstrandsgatan 15</a></h3>
<ul>
<li><a href="https://rawbata.se/">Japanese BBQ ramen</a></li>
<li>Price: mid/high</li>
<li>Score: 3.5 / 5</li>
</ul>
<p>Only tried ramen sometime ago, just so so.
Perhaps should try something else next time.</p>
<p>Seems quite large portion.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="mermaid.min.js"></script>
        
        <script type="text/javascript" src="mermaid-init.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
